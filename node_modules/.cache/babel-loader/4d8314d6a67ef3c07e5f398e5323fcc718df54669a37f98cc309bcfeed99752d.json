{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\moazz\\\\Downloads\\\\Ecommerce-MLM-Chain-main\\\\Ecommerce-MLM-Chain-main\\\\frontend\\\\frontend\\\\src\\\\components\\\\ecommerce\\\\CartContext.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { createContext, useContext, useState, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CartContext = /*#__PURE__*/createContext();\nexport function CartProvider({\n  userId = 'guest',\n  children\n}) {\n  _s();\n  const storageKey = `cart_${userId}`;\n  const [cart, setCart] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  // Load cart from localStorage\n  useEffect(() => {\n    try {\n      const stored = localStorage.getItem(storageKey);\n      if (stored) {\n        const parsed = JSON.parse(stored);\n        if (Array.isArray(parsed)) {\n          setCart(parsed);\n        } else {\n          console.warn('Invalid cart data in localStorage, resetting');\n          localStorage.removeItem(storageKey);\n        }\n      }\n    } catch (error) {\n      console.error('Error loading cart from localStorage:', error);\n      localStorage.removeItem(storageKey);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [userId, storageKey]);\n\n  // Save cart to localStorage\n  useEffect(() => {\n    if (!isLoading) {\n      try {\n        localStorage.setItem(storageKey, JSON.stringify(cart));\n        console.log('Cart saved:', cart); // Debug log\n      } catch (error) {\n        console.error('Error saving cart to localStorage:', error);\n      }\n    }\n  }, [cart, userId, storageKey, isLoading]);\n  const addToCart = (product, quantity = 1) => {\n    console.log('Adding to cart:', product, quantity); // Debug log\n\n    if (!product || !product.id) {\n      console.error('Invalid product data:', product);\n      return;\n    }\n    setCart(prev => {\n      const existingItemIndex = prev.findIndex(item => item.id === product.id);\n      if (existingItemIndex !== -1) {\n        // Update existing item quantity\n        const updated = [...prev];\n        updated[existingItemIndex].quantity += quantity;\n        console.log('Updated existing item:', updated[existingItemIndex]);\n        return updated;\n      } else {\n        // Add new item\n        const newItem = {\n          id: product.id,\n          name: product.name,\n          price: Number(product.price) || 0,\n          image: product.image,\n          quantity: quantity,\n          mlmPoints: product.mlmPoints || 0\n        };\n        console.log('Added new item:', newItem);\n        return [...prev, newItem];\n      }\n    });\n  };\n  const removeFromCart = productId => {\n    console.log('Removing from cart:', productId); // Debug log\n    setCart(prev => prev.filter(item => item.id !== productId));\n  };\n  const updateQuantity = (productId, quantity) => {\n    const qty = Math.max(1, Number(quantity) || 1);\n    console.log('Updating quantity:', productId, qty); // Debug log\n    setCart(prev => prev.map(item => item.id === productId ? {\n      ...item,\n      quantity: qty\n    } : item));\n  };\n  const clearCart = () => {\n    console.log('Clearing cart'); // Debug log\n    setCart([]);\n  };\n\n  // Calculate totals\n  const cartTotal = cart.reduce((sum, item) => sum + item.price * item.quantity, 0);\n  const itemCount = cart.reduce((sum, item) => sum + item.quantity, 0);\n  console.log('Cart state:', {\n    cart,\n    cartTotal,\n    itemCount,\n    userId\n  }); // Debug log\n\n  return /*#__PURE__*/_jsxDEV(CartContext.Provider, {\n    value: {\n      cart,\n      addToCart,\n      removeFromCart,\n      updateQuantity,\n      clearCart,\n      cartTotal,\n      itemCount,\n      isLoading\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 5\n  }, this);\n}\n_s(CartProvider, \"fZkNGYu6LaKLsjbXC27gsgysXaE=\");\n_c = CartProvider;\nexport function useCart() {\n  _s2();\n  const context = useContext(CartContext);\n  if (!context) {\n    throw new Error('useCart must be used within a CartProvider');\n  }\n  return context;\n}\n_s2(useCart, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nvar _c;\n$RefreshReg$(_c, \"CartProvider\");","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","jsxDEV","_jsxDEV","CartContext","CartProvider","userId","children","_s","storageKey","cart","setCart","isLoading","setIsLoading","stored","localStorage","getItem","parsed","JSON","parse","Array","isArray","console","warn","removeItem","error","setItem","stringify","log","addToCart","product","quantity","id","prev","existingItemIndex","findIndex","item","updated","newItem","name","price","Number","image","mlmPoints","removeFromCart","productId","filter","updateQuantity","qty","Math","max","map","clearCart","cartTotal","reduce","sum","itemCount","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","useCart","_s2","context","Error","$RefreshReg$"],"sources":["C:/Users/moazz/Downloads/Ecommerce-MLM-Chain-main/Ecommerce-MLM-Chain-main/frontend/frontend/src/components/ecommerce/CartContext.jsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\n\nconst CartContext = createContext();\n\nexport function CartProvider({ userId = 'guest', children }) {\n  const storageKey = `cart_${userId}`;\n  const [cart, setCart] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n\n  // Load cart from localStorage\n  useEffect(() => {\n    try {\n      const stored = localStorage.getItem(storageKey);\n      if (stored) {\n        const parsed = JSON.parse(stored);\n        if (Array.isArray(parsed)) {\n          setCart(parsed);\n        } else {\n          console.warn('Invalid cart data in localStorage, resetting');\n          localStorage.removeItem(storageKey);\n        }\n      }\n    } catch (error) {\n      console.error('Error loading cart from localStorage:', error);\n      localStorage.removeItem(storageKey);\n    } finally {\n      setIsLoading(false);\n    }\n  }, [userId, storageKey]);\n\n  // Save cart to localStorage\n  useEffect(() => {\n    if (!isLoading) {\n      try {\n        localStorage.setItem(storageKey, JSON.stringify(cart));\n        console.log('Cart saved:', cart); // Debug log\n      } catch (error) {\n        console.error('Error saving cart to localStorage:', error);\n      }\n    }\n  }, [cart, userId, storageKey, isLoading]);\n\n  const addToCart = (product, quantity = 1) => {\n    console.log('Adding to cart:', product, quantity); // Debug log\n    \n    if (!product || !product.id) {\n      console.error('Invalid product data:', product);\n      return;\n    }\n    \n    setCart(prev => {\n      const existingItemIndex = prev.findIndex(item => item.id === product.id);\n      \n      if (existingItemIndex !== -1) {\n        // Update existing item quantity\n        const updated = [...prev];\n        updated[existingItemIndex].quantity += quantity;\n        console.log('Updated existing item:', updated[existingItemIndex]);\n        return updated;\n      } else {\n        // Add new item\n        const newItem = {\n          id: product.id,\n          name: product.name,\n          price: Number(product.price) || 0,\n          image: product.image,\n          quantity: quantity,\n          mlmPoints: product.mlmPoints || 0\n        };\n        console.log('Added new item:', newItem);\n        return [...prev, newItem];\n      }\n    });\n  };\n\n  const removeFromCart = (productId) => {\n    console.log('Removing from cart:', productId); // Debug log\n    setCart(prev => prev.filter(item => item.id !== productId));\n  };\n\n  const updateQuantity = (productId, quantity) => {\n    const qty = Math.max(1, Number(quantity) || 1);\n    console.log('Updating quantity:', productId, qty); // Debug log\n    setCart(prev => prev.map(item => \n      item.id === productId ? { ...item, quantity: qty } : item\n    ));\n  };\n\n  const clearCart = () => {\n    console.log('Clearing cart'); // Debug log\n    setCart([]);\n  };\n\n  // Calculate totals\n  const cartTotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);\n  const itemCount = cart.reduce((sum, item) => sum + item.quantity, 0);\n\n  console.log('Cart state:', { cart, cartTotal, itemCount, userId }); // Debug log\n\n  return (\n    <CartContext.Provider value={{ \n      cart, \n      addToCart, \n      removeFromCart, \n      updateQuantity, \n      clearCart,\n      cartTotal,\n      itemCount,\n      isLoading\n    }}>\n      {children}\n    </CartContext.Provider>\n  );\n}\n\nexport function useCart() {\n  const context = useContext(CartContext);\n  if (!context) {\n    throw new Error('useCart must be used within a CartProvider');\n  }\n  return context;\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}