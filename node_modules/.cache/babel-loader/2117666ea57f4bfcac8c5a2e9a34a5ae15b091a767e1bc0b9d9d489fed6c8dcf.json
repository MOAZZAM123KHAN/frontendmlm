{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\moazz\\\\Desktop\\\\frontend\\\\src\\\\components\\\\auth\\\\SignupForm.js\",\n  _s = $RefreshSig$();\n// // // // // // import React, { useState, useEffect } from 'react';\n// // // // // // import { Formik, Form, Field, ErrorMessage } from 'formik';\n// // // // // // import * as Yup from 'yup';\n// // // // // // import { Link, useNavigate } from 'react-router-dom';\n// // // // // // import { auth, RecaptchaVerifier, signInWithPhoneNumber } from '../../firebase';\n// // // // // // import { authAPI } from '../../services/api';\n\n// // // // // // const SignupForm = () => {\n// // // // // //   const [step, setStep] = useState(1); // 1: form, 2: otp, 3: success\n// // // // // //   const [loading, setLoading] = useState(false);\n// // // // // //   const [error, setError] = useState('');\n// // // // // //   const [message, setMessage] = useState('');\n// // // // // //   const [mobileForOtp, setMobileForOtp] = useState('');\n// // // // // //   const [otp, setOtp] = useState('');\n// // // // // //   const [generatedUserId, setGeneratedUserId] = useState('');\n// // // // // //   const [formData, setFormData] = useState(null);\n// // // // // //   const navigate = useNavigate();\n\n// // // // // //   // ✅ Validation\n// // // // // //   const validationSchema = Yup.object({\n// // // // // //     name: Yup.string()\n// // // // // //       .min(2, 'Name must be at least 2 characters')\n// // // // // //       .max(50, 'Name cannot exceed 50 characters')\n// // // // // //       .required('Name is required'),\n// // // // // //     email: Yup.string().email('Please enter a valid email address').nullable(),\n// // // // // //     mobileNumber: Yup.string()\n// // // // // //       .matches(/^[0-9]{10}$/, 'Please enter a valid 10-digit mobile number')\n// // // // // //       .required('Mobile number is required'),\n// // // // // //     password: Yup.string()\n// // // // // //       .min(6, 'Password must be at least 6 characters')\n// // // // // //       .matches(/^(?=.*[a-zA-Z])(?=.*\\d).+$/, 'Password must contain at least one letter and one number')\n// // // // // //       .required('Password is required'),\n// // // // // //     confirmPassword: Yup.string()\n// // // // // //       .oneOf([Yup.ref('password'), null], 'Passwords must match')\n// // // // // //       .required('Confirm password is required'),\n// // // // // //   });\n\n// // // // // //   // ✅ Setup Recaptcha once\n// // // // // //   useEffect(() => {\n// // // // // //     if (!window.recaptchaVerifier) {\n// // // // // //       window.recaptchaVerifier = new RecaptchaVerifier(\n// // // // // //         'recaptcha-container',\n// // // // // //         { size: 'invisible' },\n// // // // // //         auth\n// // // // // //       );\n// // // // // //     }\n// // // // // //   }, []);\n\n// // // // // //   // ✅ Send OTP\n// // // // // //   const sendOtp = async (mobile) => {\n// // // // // //     setLoading(true);\n// // // // // //     setError('');\n// // // // // //     setMessage('');\n\n// // // // // //     try {\n// // // // // //       const phoneNumber = `+91${mobile}`;\n// // // // // //       const confirmationResult = await signInWithPhoneNumber(\n// // // // // //         auth,\n// // // // // //         phoneNumber,\n// // // // // //         window.recaptchaVerifier\n// // // // // //       );\n\n// // // // // //       window.confirmationResult = confirmationResult;\n// // // // // //       setMessage('OTP sent to your mobile number.');\n// // // // // //       setMobileForOtp(mobile);\n// // // // // //       setStep(2);\n// // // // // //     } catch (err) {\n// // // // // //       console.error(\"OTP Error:\", err);\n// // // // // //       if (err.code === \"auth/invalid-app-credential\") {\n// // // // // //         setError(\"Firebase config invalid है। .env values और storageBucket check करो।\");\n// // // // // //       } else if (err.code === \"auth/missing-phone-number\") {\n// // // // // //         setError(\"Phone number सही format में दो (+91XXXXXXXXXX).\");\n// // // // // //       } else {\n// // // // // //         setError(err.message || 'Failed to send OTP. Please try again.');\n// // // // // //       }\n// // // // // //     } finally {\n// // // // // //       setLoading(false);\n// // // // // //     }\n// // // // // //   };\n\n// // // // // //   // ✅ Verify OTP\n// // // // // //   const verifyOtp = async () => {\n// // // // // //     setLoading(true);\n// // // // // //     setError('');\n\n// // // // // //     try {\n// // // // // //       await window.confirmationResult.confirm(otp);\n\n// // // // // //       // Generate user ID\n// // // // // //       const userId = await generateUserId(mobileForOtp);\n// // // // // //       setGeneratedUserId(userId);\n\n// // // // // //       // Complete signup\n// // // // // //       const response = await authAPI.completeSignup({\n// // // // // //         ...formData,\n// // // // // //         userId\n// // // // // //       });\n\n// // // // // //       if (response.success) {\n// // // // // //         setMessage('Account created successfully!');\n// // // // // //         setStep(3);\n// // // // // //       } else {\n// // // // // //         throw new Error(response.message || 'Signup failed');\n// // // // // //       }\n// // // // // //     } catch (err) {\n// // // // // //       setError(err.message || 'Invalid OTP. Please try again.');\n// // // // // //     } finally {\n// // // // // //       setLoading(false);\n// // // // // //     }\n// // // // // //   };\n\n// // // // // //   // ✅ Generate User ID\n// // // // // //   const generateUserId = async (mobileNumber) => {\n// // // // // //     try {\n// // // // // //       const response = await authAPI.generateUserId({ mobileNumber });\n// // // // // //       if (response.success) return response.userId;\n// // // // // //       throw new Error(response.message || 'Failed to generate user ID');\n// // // // // //     } catch (err) {\n// // // // // //       throw err;\n// // // // // //     }\n// // // // // //   };\n\n// // // // // //   // ✅ Handle Signup Submit\n// // // // // //   const handleFormSubmit = async (values) => {\n// // // // // //     setFormData(values);\n// // // // // //     await sendOtp(values.mobileNumber);\n// // // // // //   };\n\n// // // // // //   // ==================== SCREENS ====================\n\n// // // // // //   // Step 3: Success\n// // // // // //   if (step === 3) {\n// // // // // //     return (\n// // // // // //       <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\n// // // // // //         <div className=\"max-w-md w-full space-y-8\">\n// // // // // //           <div className=\"text-center\">\n// // // // // //             <h2 className=\"text-3xl font-extrabold text-gray-900\">Registration Complete</h2>\n// // // // // //             <p className=\"mt-4 text-lg\">\n// // // // // //               Your User ID: <span className=\"font-bold\">{generatedUserId}</span>\n// // // // // //             </p>\n// // // // // //             <p className=\"mt-2 text-sm text-gray-600\">\n// // // // // //               Please note this ID carefully as you'll need it to login.\n// // // // // //             </p>\n// // // // // //           </div>\n// // // // // //           <div className=\"mt-6\">\n// // // // // //             <button\n// // // // // //               onClick={() => navigate('/login')}\n// // // // // //               className=\"w-full py-2 px-4 rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700\"\n// // // // // //             >\n// // // // // //               Proceed to Login\n// // // // // //             </button>\n// // // // // //           </div>\n// // // // // //         </div>\n// // // // // //       </div>\n// // // // // //     );\n// // // // // //   }\n\n// // // // // //   // Step 2: OTP Verification\n// // // // // //   if (step === 2) {\n// // // // // //     return (\n// // // // // //       <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\n// // // // // //         <div id=\"recaptcha-container\"></div>\n// // // // // //         <div className=\"max-w-md w-full space-y-8\">\n// // // // // //           <div className=\"text-center\">\n// // // // // //             <h2 className=\"text-3xl font-extrabold text-gray-900\">Verify OTP</h2>\n// // // // // //             <p className=\"mt-2 text-sm text-gray-600\">\n// // // // // //               Enter the 6-digit OTP sent to +91 {mobileForOtp}\n// // // // // //             </p>\n// // // // // //           </div>\n\n// // // // // //           {message && <div className=\"p-3 bg-green-50 text-green-700 rounded-md text-sm\">{message}</div>}\n// // // // // //           {error && <div className=\"p-3 bg-red-50 text-red-700 rounded-md text-sm\">{error}</div>}\n\n// // // // // //           <div className=\"space-y-4\">\n// // // // // //             <input\n// // // // // //               type=\"text\"\n// // // // // //               value={otp}\n// // // // // //               onChange={(e) => setOtp(e.target.value.replace(/\\D/g, '').slice(0, 6))}\n// // // // // //               placeholder=\"Enter 6-digit OTP\"\n// // // // // //               className=\"w-full px-3 py-2 border rounded-md text-center text-lg tracking-widest\"\n// // // // // //               inputMode=\"numeric\"\n// // // // // //               autoFocus\n// // // // // //             />\n// // // // // //             <button\n// // // // // //               onClick={verifyOtp}\n// // // // // //               disabled={loading || otp.length !== 6}\n// // // // // //               className=\"w-full py-2 px-4 rounded-md text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50\"\n// // // // // //             >\n// // // // // //               {loading ? 'Verifying...' : 'Verify OTP'}\n// // // // // //             </button>\n// // // // // //             <button\n// // // // // //               onClick={() => sendOtp(mobileForOtp)}\n// // // // // //               disabled={loading}\n// // // // // //               className=\"w-full py-2 px-4 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 text-sm\"\n// // // // // //             >\n// // // // // //               Resend OTP\n// // // // // //             </button>\n// // // // // //             <button\n// // // // // //               onClick={() => { setStep(1); setError(''); setMessage(''); }}\n// // // // // //               className=\"w-full py-2 text-indigo-600 hover:text-indigo-800 text-sm\"\n// // // // // //             >\n// // // // // //               ← Back to Signup\n// // // // // //             </button>\n// // // // // //           </div>\n// // // // // //         </div>\n// // // // // //       </div>\n// // // // // //     );\n// // // // // //   }\n\n// // // // // //   // Step 1: Registration Form\n// // // // // //   return (\n// // // // // //     <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\n// // // // // //       <div id=\"recaptcha-container\"></div>\n// // // // // //       <div className=\"max-w-md w-full space-y-8\">\n// // // // // //         <div className=\"text-center\">\n// // // // // //           <h2 className=\"text-3xl font-extrabold text-gray-900\">Create your account</h2>\n// // // // // //           <p className=\"mt-2 text-sm text-gray-600\">\n// // // // // //             Or{' '}\n// // // // // //             <Link to=\"/login\" className=\"font-medium text-indigo-600 hover:text-indigo-500\">\n// // // // // //               sign in to your account\n// // // // // //             </Link>\n// // // // // //           </p>\n// // // // // //         </div>\n\n// // // // // //         <Formik\n// // // // // //           initialValues={{ name: '', email: '', mobileNumber: '', password: '', confirmPassword: '' }}\n// // // // // //           validationSchema={validationSchema}\n// // // // // //           onSubmit={handleFormSubmit}\n// // // // // //         >\n// // // // // //           {({ isValid, dirty }) => (\n// // // // // //             <Form className=\"mt-8 space-y-6\">\n// // // // // //               <div className=\"space-y-4\">\n// // // // // //                 {/* Name */}\n// // // // // //                 <div>\n// // // // // //                   <label className=\"block text-sm font-medium\">Full Name</label>\n// // // // // //                   <Field name=\"name\" type=\"text\" placeholder=\"Your full name\"\n// // // // // //                     className=\"mt-1 block w-full px-3 py-2 border rounded-md\" />\n// // // // // //                   <ErrorMessage name=\"name\" component=\"div\" className=\"text-sm text-red-600\" />\n// // // // // //                 </div>\n\n// // // // // //                 {/* Email */}\n// // // // // //                 <div>\n// // // // // //                   <label className=\"block text-sm font-medium\">Email (optional)</label>\n// // // // // //                   <Field name=\"email\" type=\"email\" placeholder=\"your.email@example.com\"\n// // // // // //                     className=\"mt-1 block w-full px-3 py-2 border rounded-md\" />\n// // // // // //                   <ErrorMessage name=\"email\" component=\"div\" className=\"text-sm text-red-600\" />\n// // // // // //                 </div>\n\n// // // // // //                 {/* Mobile */}\n// // // // // //                 <div>\n// // // // // //                   <label className=\"block text-sm font-medium\">Mobile Number</label>\n// // // // // //                   <div className=\"flex mt-1\">\n// // // // // //                     <span className=\"px-3 py-2 border bg-gray-50 text-gray-500\">+91</span>\n// // // // // //                     <Field name=\"mobileNumber\" type=\"tel\" maxLength=\"10\" placeholder=\"9876543210\"\n// // // // // //                       className=\"flex-1 px-3 py-2 border rounded-r-md\" />\n// // // // // //                   </div>\n// // // // // //                   <ErrorMessage name=\"mobileNumber\" component=\"div\" className=\"text-sm text-red-600\" />\n// // // // // //                 </div>\n\n// // // // // //                 {/* Password */}\n// // // // // //                 <div>\n// // // // // //                   <label className=\"block text-sm font-medium\">Password</label>\n// // // // // //                   <Field name=\"password\" type=\"password\" placeholder=\"At least 6 characters\"\n// // // // // //                     className=\"mt-1 block w-full px-3 py-2 border rounded-md\" />\n// // // // // //                   <ErrorMessage name=\"password\" component=\"div\" className=\"text-sm text-red-600\" />\n// // // // // //                 </div>\n\n// // // // // //                 {/* Confirm Password */}\n// // // // // //                 <div>\n// // // // // //                   <label className=\"block text-sm font-medium\">Confirm Password</label>\n// // // // // //                   <Field name=\"confirmPassword\" type=\"password\" placeholder=\"Confirm your password\"\n// // // // // //                     className=\"mt-1 block w-full px-3 py-2 border rounded-md\" />\n// // // // // //                   <ErrorMessage name=\"confirmPassword\" component=\"div\" className=\"text-sm text-red-600\" />\n// // // // // //                 </div>\n// // // // // //               </div>\n\n// // // // // //               {error && <div className=\"bg-red-50 p-3 text-sm text-red-700 rounded-md\">{error}</div>}\n\n// // // // // //               <button\n// // // // // //                 type=\"submit\"\n// // // // // //                 disabled={loading || !isValid || !dirty}\n// // // // // //                 className=\"w-full py-2 px-4 rounded-md text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50\"\n// // // // // //               >\n// // // // // //                 {loading ? 'Sending OTP...' : 'Sign Up'}\n// // // // // //               </button>\n// // // // // //             </Form>\n// // // // // //           )}\n// // // // // //         </Formik>\n// // // // // //       </div>\n// // // // // //     </div>\n// // // // // //   );\n// // // // // // };\n\n// // // // // // export default SignupForm;\n\n// // // // // import React, { useState, useEffect } from 'react';\n// // // // // import { Formik, Form, Field, ErrorMessage } from 'formik';\n// // // // // import * as Yup from 'yup';\n// // // // // import { Link, useNavigate } from 'react-router-dom';\n// // // // // import { auth, RecaptchaVerifier, signInWithPhoneNumber } from '../../firebase';\n// // // // // import { authAPI } from '../../services/api';\n\n// // // // // const SignupForm = () => {\n// // // // //   const [step, setStep] = useState(1); // 1: form, 2: otp, 3: success\n// // // // //   const [loading, setLoading] = useState(false);\n// // // // //   const [error, setError] = useState('');\n// // // // //   const [message, setMessage] = useState('');\n// // // // //   const [mobileForOtp, setMobileForOtp] = useState('');\n// // // // //   const [otp, setOtp] = useState('');\n// // // // //   const [formData, setFormData] = useState(null);\n// // // // //   const navigate = useNavigate();\n\n// // // // //   // ✅ Validation\n// // // // //   const validationSchema = Yup.object({\n// // // // //     name: Yup.string()\n// // // // //       .min(2, 'Name must be at least 2 characters')\n// // // // //       .max(50, 'Name cannot exceed 50 characters')\n// // // // //       .required('Name is required'),\n// // // // //     email: Yup.string().email('Please enter a valid email address').nullable(),\n// // // // //     mobileNumber: Yup.string()\n// // // // //       .matches(/^[0-9]{10}$/, 'Please enter a valid 10-digit mobile number')\n// // // // //       .required('Mobile number is required'),\n// // // // //     password: Yup.string()\n// // // // //       .min(6, 'Password must be at least 6 characters')\n// // // // //       .matches(/^(?=.*[a-zA-Z])(?=.*\\d).+$/, 'Password must contain at least one letter and one number')\n// // // // //       .required('Password is required'),\n// // // // //     confirmPassword: Yup.string()\n// // // // //       .oneOf([Yup.ref('password'), null], 'Passwords must match')\n// // // // //       .required('Confirm password is required'),\n// // // // //   });\n\n// // // // //   // ✅ Setup Recaptcha once\n// // // // //   useEffect(() => {\n// // // // //     if (!window.recaptchaVerifier) {\n// // // // //       window.recaptchaVerifier = new RecaptchaVerifier(\n// // // // //         'recaptcha-container',\n// // // // //         { size: 'invisible' },\n// // // // //         auth\n// // // // //       );\n// // // // //     }\n// // // // //   }, []);\n\n// // // // //   // ✅ Send OTP\n// // // // //   const sendOtp = async (mobile) => {\n// // // // //     setLoading(true);\n// // // // //     setError('');\n// // // // //     setMessage('');\n\n// // // // //     try {\n// // // // //       const phoneNumber = `+91${mobile}`;\n// // // // //       const confirmationResult = await signInWithPhoneNumber(\n// // // // //         auth,\n// // // // //         phoneNumber,\n// // // // //         window.recaptchaVerifier\n// // // // //       );\n\n// // // // //       window.confirmationResult = confirmationResult;\n// // // // //       setMessage('OTP sent to your mobile number.');\n// // // // //       setMobileForOtp(mobile);\n// // // // //       setStep(2);\n// // // // //     } catch (err) {\n// // // // //       console.error(\"OTP Error:\", err);\n// // // // //       if (err.code === \"auth/invalid-app-credential\") {\n// // // // //         setError(\"Firebase config invalid है। .env values और storageBucket check करो।\");\n// // // // //       } else if (err.code === \"auth/missing-phone-number\") {\n// // // // //         setError(\"Phone number सही format में दो (+91XXXXXXXXXX).\");\n// // // // //       } else {\n// // // // //         setError(err.message || 'Failed to send OTP. Please try again.');\n// // // // //       }\n// // // // //     } finally {\n// // // // //       setLoading(false);\n// // // // //     }\n// // // // //   };\n\n// // // // //   // ✅ Verify OTP (direct signup)\n// // // // //   const verifyOtp = async () => {\n// // // // //     setLoading(true);\n// // // // //     setError('');\n\n// // // // //     try {\n// // // // //       await window.confirmationResult.confirm(otp);\n\n// // // // //       // ✅ Directly complete signup (skip generateUserId)\n// // // // //       const response = await authAPI.completeSignup({\n// // // // //         ...formData,\n// // // // //         mobileNumber: mobileForOtp\n// // // // //       });\n\n// // // // //       if (response.success) {\n// // // // //         setMessage('Account created successfully!');\n// // // // //         setStep(3);\n// // // // //       } else {\n// // // // //         throw new Error(response.message || 'Signup failed');\n// // // // //       }\n// // // // //     } catch (err) {\n// // // // //       setError(err.message || 'Invalid OTP. Please try again.');\n// // // // //     } finally {\n// // // // //       setLoading(false);\n// // // // //     }\n// // // // //   };\n\n// // // // //   // ✅ Handle Signup Submit\n// // // // //   const handleFormSubmit = async (values) => {\n// // // // //     setFormData(values);\n// // // // //     await sendOtp(values.mobileNumber);\n// // // // //   };\n\n// // // // //   // ==================== SCREENS ====================\n\n// // // // //   // Step 3: Success\n// // // // //   if (step === 3) {\n// // // // //     return (\n// // // // //       <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\n// // // // //         <div className=\"max-w-md w-full space-y-8\">\n// // // // //           <div className=\"text-center\">\n// // // // //             <h2 className=\"text-3xl font-extrabold text-gray-900\">Registration Complete</h2>\n// // // // //             <p className=\"mt-2 text-sm text-gray-600\">\n// // // // //               Please proceed to login with your credentials.\n// // // // //             </p>\n// // // // //           </div>\n// // // // //           <div className=\"mt-6\">\n// // // // //             <button\n// // // // //               onClick={() => navigate('/login')}\n// // // // //               className=\"w-full py-2 px-4 rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700\"\n// // // // //             >\n// // // // //               Proceed to Login\n// // // // //             </button>\n// // // // //           </div>\n// // // // //         </div>\n// // // // //       </div>\n// // // // //     );\n// // // // //   }\n\n// // // // //   // Step 2: OTP Verification\n// // // // //   if (step === 2) {\n// // // // //     return (\n// // // // //       <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\n// // // // //         <div id=\"recaptcha-container\"></div>\n// // // // //         <div className=\"max-w-md w-full space-y-8\">\n// // // // //           <div className=\"text-center\">\n// // // // //             <h2 className=\"text-3xl font-extrabold text-gray-900\">Verify OTP</h2>\n// // // // //             <p className=\"mt-2 text-sm text-gray-600\">\n// // // // //               Enter the 6-digit OTP sent to +91 {mobileForOtp}\n// // // // //             </p>\n// // // // //           </div>\n\n// // // // //           {message && <div className=\"p-3 bg-green-50 text-green-700 rounded-md text-sm\">{message}</div>}\n// // // // //           {error && <div className=\"p-3 bg-red-50 text-red-700 rounded-md text-sm\">{error}</div>}\n\n// // // // //           <div className=\"space-y-4\">\n// // // // //             <input\n// // // // //               type=\"text\"\n// // // // //               value={otp}\n// // // // //               onChange={(e) => setOtp(e.target.value.replace(/\\D/g, '').slice(0, 6))}\n// // // // //               placeholder=\"Enter 6-digit OTP\"\n// // // // //               className=\"w-full px-3 py-2 border rounded-md text-center text-lg tracking-widest\"\n// // // // //               inputMode=\"numeric\"\n// // // // //               autoFocus\n// // // // //             />\n// // // // //             <button\n// // // // //               onClick={verifyOtp}\n// // // // //               disabled={loading || otp.length !== 6}\n// // // // //               className=\"w-full py-2 px-4 rounded-md text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50\"\n// // // // //             >\n// // // // //               {loading ? 'Verifying...' : 'Verify OTP'}\n// // // // //             </button>\n// // // // //             <button\n// // // // //               onClick={() => sendOtp(mobileForOtp)}\n// // // // //               disabled={loading}\n// // // // //               className=\"w-full py-2 px-4 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 text-sm\"\n// // // // //             >\n// // // // //               Resend OTP\n// // // // //             </button>\n// // // // //             <button\n// // // // //               onClick={() => { setStep(1); setError(''); setMessage(''); }}\n// // // // //               className=\"w-full py-2 text-indigo-600 hover:text-indigo-800 text-sm\"\n// // // // //             >\n// // // // //               ← Back to Signup\n// // // // //             </button>\n// // // // //           </div>\n// // // // //         </div>\n// // // // //       </div>\n// // // // //     );\n// // // // //   }\n\n// // // // //   // Step 1: Registration Form\n// // // // //   return (\n// // // // //     <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\n// // // // //       <div id=\"recaptcha-container\"></div>\n// // // // //       <div className=\"max-w-md w-full space-y-8\">\n// // // // //         <div className=\"text-center\">\n// // // // //           <h2 className=\"text-3xl font-extrabold text-gray-900\">Create your account</h2>\n// // // // //           <p className=\"mt-2 text-sm text-gray-600\">\n// // // // //             Or{' '}\n// // // // //             <Link to=\"/login\" className=\"font-medium text-indigo-600 hover:text-indigo-500\">\n// // // // //               sign in to your account\n// // // // //             </Link>\n// // // // //           </p>\n// // // // //         </div>\n\n// // // // //         <Formik\n// // // // //           initialValues={{ name: '', email: '', mobileNumber: '', password: '', confirmPassword: '' }}\n// // // // //           validationSchema={validationSchema}\n// // // // //           onSubmit={handleFormSubmit}\n// // // // //         >\n// // // // //           {({ isValid, dirty }) => (\n// // // // //             <Form className=\"mt-8 space-y-6\">\n// // // // //               <div className=\"space-y-4\">\n// // // // //                 {/* Name */}\n// // // // //                 <div>\n// // // // //                   <label className=\"block text-sm font-medium\">Full Name</label>\n// // // // //                   <Field name=\"name\" type=\"text\" placeholder=\"Your full name\"\n// // // // //                     className=\"mt-1 block w-full px-3 py-2 border rounded-md\" />\n// // // // //                   <ErrorMessage name=\"name\" component=\"div\" className=\"text-sm text-red-600\" />\n// // // // //                 </div>\n\n// // // // //                 {/* Email */}\n// // // // //                 <div>\n// // // // //                   <label className=\"block text-sm font-medium\">Email (optional)</label>\n// // // // //                   <Field name=\"email\" type=\"email\" placeholder=\"your.email@example.com\"\n// // // // //                     className=\"mt-1 block w-full px-3 py-2 border rounded-md\" />\n// // // // //                   <ErrorMessage name=\"email\" component=\"div\" className=\"text-sm text-red-600\" />\n// // // // //                 </div>\n\n// // // // //                 {/* Mobile */}\n// // // // //                 <div>\n// // // // //                   <label className=\"block text-sm font-medium\">Mobile Number</label>\n// // // // //                   <div className=\"flex mt-1\">\n// // // // //                     <span className=\"px-3 py-2 border bg-gray-50 text-gray-500\">+91</span>\n// // // // //                     <Field name=\"mobileNumber\" type=\"tel\" maxLength=\"10\" placeholder=\"9876543210\"\n// // // // //                       className=\"flex-1 px-3 py-2 border rounded-r-md\" />\n// // // // //                   </div>\n// // // // //                   <ErrorMessage name=\"mobileNumber\" component=\"div\" className=\"text-sm text-red-600\" />\n// // // // //                 </div>\n\n// // // // //                 {/* Password */}\n// // // // //                 <div>\n// // // // //                   <label className=\"block text-sm font-medium\">Password</label>\n// // // // //                   <Field name=\"password\" type=\"password\" placeholder=\"At least 6 characters\"\n// // // // //                     className=\"mt-1 block w-full px-3 py-2 border rounded-md\" />\n// // // // //                   <ErrorMessage name=\"password\" component=\"div\" className=\"text-sm text-red-600\" />\n// // // // //                 </div>\n\n// // // // //                 {/* Confirm Password */}\n// // // // //                 <div>\n// // // // //                   <label className=\"block text-sm font-medium\">Confirm Password</label>\n// // // // //                   <Field name=\"confirmPassword\" type=\"password\" placeholder=\"Confirm your password\"\n// // // // //                     className=\"mt-1 block w-full px-3 py-2 border rounded-md\" />\n// // // // //                   <ErrorMessage name=\"confirmPassword\" component=\"div\" className=\"text-sm text-red-600\" />\n// // // // //                 </div>\n// // // // //               </div>\n\n// // // // //               {error && <div className=\"bg-red-50 p-3 text-sm text-red-700 rounded-md\">{error}</div>}\n\n// // // // //               <button\n// // // // //                 type=\"submit\"\n// // // // //                 disabled={loading || !isValid || !dirty}\n// // // // //                 className=\"w-full py-2 px-4 rounded-md text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50\"\n// // // // //               >\n// // // // //                 {loading ? 'Sending OTP...' : 'Sign Up'}\n// // // // //               </button>\n// // // // //             </Form>\n// // // // //           )}\n// // // // //         </Formik>\n// // // // //       </div>\n// // // // //     </div>\n// // // // //   );\n// // // // // };\n\n// // // // // export default SignupForm;\n\n// // // // import React, { useState, useEffect } from \"react\";\n// // // // import { Formik, Form, Field, ErrorMessage } from \"formik\";\n// // // // import * as Yup from \"yup\";\n// // // // import { Link, useNavigate } from \"react-router-dom\";\n// // // // import { auth, RecaptchaVerifier, signInWithPhoneNumber } from \"../../firebase\";\n// // // // import { authAPI } from \"../../services/api\";\n\n// // // // const SignupForm = () => {\n// // // //   const [step, setStep] = useState(1); // 1: form, 2: otp, 3: success\n// // // //   const [loading, setLoading] = useState(false);\n// // // //   const [error, setError] = useState(\"\");\n// // // //   const [message, setMessage] = useState(\"\");\n// // // //   const [mobileForOtp, setMobileForOtp] = useState(\"\");\n// // // //   const [otp, setOtp] = useState(\"\");\n// // // //   const [formData, setFormData] = useState(null);\n// // // //   const navigate = useNavigate();\n\n// // // //   // ✅ Validation\n// // // //   const validationSchema = Yup.object({\n// // // //     name: Yup.string()\n// // // //       .min(2, \"Name must be at least 2 characters\")\n// // // //       .max(50, \"Name cannot exceed 50 characters\")\n// // // //       .required(\"Name is required\"),\n// // // //     email: Yup.string().email(\"Please enter a valid email address\").nullable(),\n// // // //     mobileNumber: Yup.string()\n// // // //       .matches(/^[0-9]{10}$/, \"Please enter a valid 10-digit mobile number\")\n// // // //       .required(\"Mobile number is required\"),\n// // // //     password: Yup.string()\n// // // //       .min(6, \"Password must be at least 6 characters\")\n// // // //       .matches(\n// // // //         /^(?=.*[a-zA-Z])(?=.*\\d).+$/,\n// // // //         \"Password must contain at least one letter and one number\"\n// // // //       )\n// // // //       .required(\"Password is required\"),\n// // // //     confirmPassword: Yup.string()\n// // // //       .oneOf([Yup.ref(\"password\"), null], \"Passwords must match\")\n// // // //       .required(\"Confirm password is required\"),\n// // // //   });\n\n// // // //   // ✅ Setup Recaptcha once\n// // // //   useEffect(() => {\n// // // //     if (!window.recaptchaVerifier) {\n// // // //       window.recaptchaVerifier = new RecaptchaVerifier(\n// // // //         \"recaptcha-container\",\n// // // //         { size: \"invisible\" },\n// // // //         auth\n// // // //       );\n// // // //     }\n// // // //   }, []);\n\n// // // //   // ✅ Send OTP\n// // // //   const sendOtp = async (mobile) => {\n// // // //     setLoading(true);\n// // // //     setError(\"\");\n// // // //     setMessage(\"\");\n\n// // // //     try {\n// // // //       const phoneNumber = `+91${mobile}`;\n// // // //       const confirmationResult = await signInWithPhoneNumber(\n// // // //         auth,\n// // // //         phoneNumber,\n// // // //         window.recaptchaVerifier\n// // // //       );\n\n// // // //       window.confirmationResult = confirmationResult;\n// // // //       setMessage(\"OTP sent to your mobile number.\");\n// // // //       setMobileForOtp(mobile);\n// // // //       setStep(2);\n// // // //     } catch (err) {\n// // // //       console.error(\"OTP Error:\", err);\n// // // //       if (err.code === \"auth/too-many-requests\") {\n// // // //         setError(\"Too many OTP requests. Please wait and try again later.\");\n// // // //       } else if (err.code === \"auth/missing-phone-number\") {\n// // // //         setError(\"Phone number सही format में दो (+91XXXXXXXXXX).\");\n// // // //       } else {\n// // // //         setError(err.message || \"Failed to send OTP. Please try again.\");\n// // // //       }\n// // // //     } finally {\n// // // //       setLoading(false);\n// // // //     }\n// // // //   };\n\n// // // //   // ✅ Verify OTP + Complete Signup\n// // // //   const verifyOtp = async () => {\n// // // //     setLoading(true);\n// // // //     setError(\"\");\n\n// // // //     try {\n// // // //       await window.confirmationResult.confirm(otp);\n\n// // // //       // ✅ Directly complete signup (multi-user per mobile allowed)\n// // // //       const response = await authAPI.completeSignup({\n// // // //         ...formData,\n// // // //         mobileNumber: mobileForOtp,\n// // // //       });\n\n// // // //       if (response.success) {\n// // // //         setMessage(\n// // // //           `Signup successful ✅ Your User ID: ${response.data.userId}`\n// // // //         );\n// // // //         console.log(\"All User IDs for this number:\", response.data.allUserIds);\n// // // //         setStep(3);\n// // // //       } else {\n// // // //         throw new Error(response.message || \"Signup failed\");\n// // // //       }\n// // // //     } catch (err) {\n// // // //       console.error(\"Signup OTP error:\", err);\n// // // //       setError(err.message || \"Invalid OTP. Please try again.\");\n// // // //     } finally {\n// // // //       setLoading(false);\n// // // //     }\n// // // //   };\n\n// // // //   // ✅ Handle Signup Submit\n// // // //   const handleFormSubmit = async (values) => {\n// // // //     setFormData(values);\n// // // //     await sendOtp(values.mobileNumber);\n// // // //   };\n\n// // // //   // ==================== SCREENS ====================\n\n// // // //   // Step 3: Success\n// // // //   if (step === 3) {\n// // // //     return (\n// // // //       <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\n// // // //         <div className=\"max-w-md w-full space-y-8\">\n// // // //           <div className=\"text-center\">\n// // // //             <h2 className=\"text-3xl font-extrabold text-gray-900\">\n// // // //               Registration Complete\n// // // //             </h2>\n// // // //             <p className=\"mt-2 text-sm text-gray-600\">\n// // // //               Please proceed to login with your credentials.\n// // // //             </p>\n// // // //           </div>\n// // // //           <div className=\"mt-6\">\n// // // //             <button\n// // // //               onClick={() => navigate(\"/login\")}\n// // // //               className=\"w-full py-2 px-4 rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700\"\n// // // //             >\n// // // //               Proceed to Login\n// // // //             </button>\n// // // //           </div>\n// // // //         </div>\n// // // //       </div>\n// // // //     );\n// // // //   }\n\n// // // //   // Step 2: OTP Verification\n// // // //   if (step === 2) {\n// // // //     return (\n// // // //       <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\n// // // //         <div id=\"recaptcha-container\"></div>\n// // // //         <div className=\"max-w-md w-full space-y-8\">\n// // // //           <div className=\"text-center\">\n// // // //             <h2 className=\"text-3xl font-extrabold text-gray-900\">Verify OTP</h2>\n// // // //             <p className=\"mt-2 text-sm text-gray-600\">\n// // // //               Enter the 6-digit OTP sent to +91 {mobileForOtp}\n// // // //             </p>\n// // // //           </div>\n\n// // // //           {message && (\n// // // //             <div className=\"p-3 bg-green-50 text-green-700 rounded-md text-sm\">\n// // // //               {message}\n// // // //             </div>\n// // // //           )}\n// // // //           {error && (\n// // // //             <div className=\"p-3 bg-red-50 text-red-700 rounded-md text-sm\">\n// // // //               {error}\n// // // //             </div>\n// // // //           )}\n\n// // // //           <div className=\"space-y-4\">\n// // // //             <input\n// // // //               type=\"text\"\n// // // //               value={otp}\n// // // //               onChange={(e) =>\n// // // //                 setOtp(e.target.value.replace(/\\D/g, \"\").slice(0, 6))\n// // // //               }\n// // // //               placeholder=\"Enter 6-digit OTP\"\n// // // //               className=\"w-full px-3 py-2 border rounded-md text-center text-lg tracking-widest\"\n// // // //               inputMode=\"numeric\"\n// // // //               autoFocus\n// // // //             />\n// // // //             <button\n// // // //               onClick={verifyOtp}\n// // // //               disabled={loading || otp.length !== 6}\n// // // //               className=\"w-full py-2 px-4 rounded-md text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50\"\n// // // //             >\n// // // //               {loading ? \"Verifying...\" : \"Verify OTP\"}\n// // // //             </button>\n// // // //             <button\n// // // //               onClick={() => sendOtp(mobileForOtp)}\n// // // //               disabled={loading}\n// // // //               className=\"w-full py-2 px-4 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 text-sm\"\n// // // //             >\n// // // //               Resend OTP\n// // // //             </button>\n// // // //             <button\n// // // //               onClick={() => {\n// // // //                 setStep(1);\n// // // //                 setError(\"\");\n// // // //                 setMessage(\"\");\n// // // //               }}\n// // // //               className=\"w-full py-2 text-indigo-600 hover:text-indigo-800 text-sm\"\n// // // //             >\n// // // //               ← Back to Signup\n// // // //             </button>\n// // // //           </div>\n// // // //         </div>\n// // // //       </div>\n// // // //     );\n// // // //   }\n\n// // // //   // Step 1: Registration Form\n// // // //   return (\n// // // //     <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\n// // // //       <div id=\"recaptcha-container\"></div>\n// // // //       <div className=\"max-w-md w-full space-y-8\">\n// // // //         <div className=\"text-center\">\n// // // //           <h2 className=\"text-3xl font-extrabold text-gray-900\">\n// // // //             Create your account\n// // // //           </h2>\n// // // //           <p className=\"mt-2 text-sm text-gray-600\">\n// // // //             Or{\" \"}\n// // // //             <Link\n// // // //               to=\"/login\"\n// // // //               className=\"font-medium text-indigo-600 hover:text-indigo-500\"\n// // // //             >\n// // // //               sign in to your account\n// // // //             </Link>\n// // // //           </p>\n// // // //         </div>\n\n// // // //         <Formik\n// // // //           initialValues={{\n// // // //             name: \"\",\n// // // //             email: \"\",\n// // // //             mobileNumber: \"\",\n// // // //             password: \"\",\n// // // //             confirmPassword: \"\",\n// // // //           }}\n// // // //           validationSchema={validationSchema}\n// // // //           onSubmit={handleFormSubmit}\n// // // //         >\n// // // //           {({ isValid, dirty }) => (\n// // // //             <Form className=\"mt-8 space-y-6\">\n// // // //               <div className=\"space-y-4\">\n// // // //                 {/* Name */}\n// // // //                 <div>\n// // // //                   <label className=\"block text-sm font-medium\">Full Name</label>\n// // // //                   <Field\n// // // //                     name=\"name\"\n// // // //                     type=\"text\"\n// // // //                     placeholder=\"Your full name\"\n// // // //                     className=\"mt-1 block w-full px-3 py-2 border rounded-md\"\n// // // //                   />\n// // // //                   <ErrorMessage\n// // // //                     name=\"name\"\n// // // //                     component=\"div\"\n// // // //                     className=\"text-sm text-red-600\"\n// // // //                   />\n// // // //                 </div>\n\n// // // //                 {/* Email */}\n// // // //                 <div>\n// // // //                   <label className=\"block text-sm font-medium\">\n// // // //                     Email (optional)\n// // // //                   </label>\n// // // //                   <Field\n// // // //                     name=\"email\"\n// // // //                     type=\"email\"\n// // // //                     placeholder=\"your.email@example.com\"\n// // // //                     className=\"mt-1 block w-full px-3 py-2 border rounded-md\"\n// // // //                   />\n// // // //                   <ErrorMessage\n// // // //                     name=\"email\"\n// // // //                     component=\"div\"\n// // // //                     className=\"text-sm text-red-600\"\n// // // //                   />\n// // // //                 </div>\n\n// // // //                 {/* Mobile */}\n// // // //                 <div>\n// // // //                   <label className=\"block text-sm font-medium\">\n// // // //                     Mobile Number\n// // // //                   </label>\n// // // //                   <div className=\"flex mt-1\">\n// // // //                     <span className=\"px-3 py-2 border bg-gray-50 text-gray-500\">\n// // // //                       +91\n// // // //                     </span>\n// // // //                     <Field\n// // // //                       name=\"mobileNumber\"\n// // // //                       type=\"tel\"\n// // // //                       maxLength=\"10\"\n// // // //                       placeholder=\"9876543210\"\n// // // //                       className=\"flex-1 px-3 py-2 border rounded-r-md\"\n// // // //                     />\n// // // //                   </div>\n// // // //                   <ErrorMessage\n// // // //                     name=\"mobileNumber\"\n// // // //                     component=\"div\"\n// // // //                     className=\"text-sm text-red-600\"\n// // // //                   />\n// // // //                 </div>\n\n// // // //                 {/* Password */}\n// // // //                 <div>\n// // // //                   <label className=\"block text-sm font-medium\">Password</label>\n// // // //                   <Field\n// // // //                     name=\"password\"\n// // // //                     type=\"password\"\n// // // //                     placeholder=\"At least 6 characters\"\n// // // //                     className=\"mt-1 block w-full px-3 py-2 border rounded-md\"\n// // // //                   />\n// // // //                   <ErrorMessage\n// // // //                     name=\"password\"\n// // // //                     component=\"div\"\n// // // //                     className=\"text-sm text-red-600\"\n// // // //                   />\n// // // //                 </div>\n\n// // // //                 {/* Confirm Password */}\n// // // //                 <div>\n// // // //                   <label className=\"block text-sm font-medium\">\n// // // //                     Confirm Password\n// // // //                   </label>\n// // // //                   <Field\n// // // //                     name=\"confirmPassword\"\n// // // //                     type=\"password\"\n// // // //                     placeholder=\"Confirm your password\"\n// // // //                     className=\"mt-1 block w-full px-3 py-2 border rounded-md\"\n// // // //                   />\n// // // //                   <ErrorMessage\n// // // //                     name=\"confirmPassword\"\n// // // //                     component=\"div\"\n// // // //                     className=\"text-sm text-red-600\"\n// // // //                   />\n// // // //                 </div>\n// // // //               </div>\n\n// // // //               {error && (\n// // // //                 <div className=\"bg-red-50 p-3 text-sm text-red-700 rounded-md\">\n// // // //                   {error}\n// // // //                 </div>\n// // // //               )}\n\n// // // //               <button\n// // // //                 type=\"submit\"\n// // // //                 disabled={loading || !isValid || !dirty}\n// // // //                 className=\"w-full py-2 px-4 rounded-md text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50\"\n// // // //               >\n// // // //                 {loading ? \"Sending OTP...\" : \"Sign Up\"}\n// // // //               </button>\n// // // //             </Form>\n// // // //           )}\n// // // //         </Formik>\n// // // //       </div>\n// // // //     </div>\n// // // //   );\n// // // // };\n\n// // // // export default SignupForm;\n\n// // // import React, { useState, useEffect } from \"react\";\n// // // import { Formik, Form, Field, ErrorMessage } from \"formik\";\n// // // import * as Yup from \"yup\";\n// // // import { Link, useNavigate } from \"react-router-dom\";\n// // // import { auth, RecaptchaVerifier, signInWithPhoneNumber } from \"../../firebase\";\n// // // import { authAPI } from \"../../services/api\";\n\n// // // const SignupForm = () => {\n// // //   const [step, setStep] = useState(1); \n// // //   const [loading, setLoading] = useState(false);\n// // //   const [error, setError] = useState(\"\");\n// // //   const [message, setMessage] = useState(\"\");\n// // //   const [mobileForOtp, setMobileForOtp] = useState(\"\");\n// // //   const [otp, setOtp] = useState(\"\");\n// // //   const [formData, setFormData] = useState(null);\n// // //   const navigate = useNavigate();\n\n// // //   // ✅ Validation\n// // //   const validationSchema = Yup.object({\n// // //     name: Yup.string().min(2).max(50).required(\"Name is required\"),\n// // //     email: Yup.string().email(\"Please enter a valid email address\").nullable(),\n// // //     mobileNumber: Yup.string()\n// // //       .matches(/^[0-9]{10}$/, \"Please enter a valid 10-digit mobile number\")\n// // //       .required(\"Mobile number is required\"),\n// // //     password: Yup.string()\n// // //       .min(6, \"Password must be at least 6 characters\")\n// // //       .matches(/^(?=.*[a-zA-Z])(?=.*\\d).+$/, \"Password must contain at least one letter and one number\")\n// // //       .required(\"Password is required\"),\n// // //     confirmPassword: Yup.string()\n// // //       .oneOf([Yup.ref(\"password\"), null], \"Passwords must match\")\n// // //       .required(\"Confirm password is required\"),\n// // //   });\n\n// // //   // ✅ Setup Recaptcha (Reset if already exists)\n// // //   const setupRecaptcha = () => {\n// // //     if (window.recaptchaVerifier) {\n// // //       window.recaptchaVerifier.clear();\n// // //     }\n// // //     window.recaptchaVerifier = new RecaptchaVerifier(\n// // //       auth,\n// // //       \"recaptcha-container\",\n// // //       { size: \"invisible\" }\n// // //     );\n// // //   };\n\n// // //   // ✅ Send OTP\n// // //   const sendOtp = async (mobile) => {\n// // //     setLoading(true);\n// // //     setError(\"\");\n// // //     setMessage(\"\");\n\n// // //     try {\n// // //       setupRecaptcha(); // always reset\n// // //       const phoneNumber = `+91${mobile}`;\n// // //       const appVerifier = window.recaptchaVerifier;\n\n// // //       const confirmationResult = await signInWithPhoneNumber(\n// // //         auth,\n// // //         phoneNumber,\n// // //         appVerifier\n// // //       );\n\n// // //       window.confirmationResult = confirmationResult;\n// // //       setMessage(\"OTP sent to your mobile number.\");\n// // //       setMobileForOtp(mobile);\n// // //       setStep(2);\n// // //     } catch (err) {\n// // //       console.error(\"OTP Error:\", err);\n// // //       if (err.code === \"auth/too-many-requests\") {\n// // //         setError(\"Too many OTP requests. Please wait and try again later.\");\n// // //       } else if (err.code === \"auth/missing-phone-number\") {\n// // //         setError(\"Phone number सही format में दो (+91XXXXXXXXXX).\");\n// // //       } else {\n// // //         setError(err.message || \"Failed to send OTP. Please try again.\");\n// // //       }\n// // //     } finally {\n// // //       setLoading(false);\n// // //     }\n// // //   };\n\n// // //   // ✅ Verify OTP + Complete Signup\n// // //   const verifyOtp = async () => {\n// // //     setLoading(true);\n// // //     setError(\"\");\n\n// // //     try {\n// // //       await window.confirmationResult.confirm(otp);\n\n// // //       const response = await authAPI.completeSignup({\n// // //         ...formData,\n// // //         mobileNumber: mobileForOtp,\n// // //       });\n\n// // //       if (response.success) {\n// // //         setMessage(`Signup successful ✅ Your User ID: ${response.data.userId}`);\n// // //         console.log(\"All User IDs for this number:\", response.data.allUserIds);\n// // //         setStep(3);\n// // //       } else {\n// // //         throw new Error(response.message || \"Signup failed\");\n// // //       }\n// // //     } catch (err) {\n// // //       console.error(\"Signup OTP error:\", err);\n// // //       setError(err.message || \"Invalid OTP. Please try again.\");\n// // //     } finally {\n// // //       setLoading(false);\n// // //     }\n// // //   };\n\n// // //   // ✅ Handle Signup Submit\n// // //   const handleFormSubmit = async (values) => {\n// // //     setFormData(values);\n// // //     await sendOtp(values.mobileNumber);\n// // //   };\n\n// // //   // Step 3: Success\n// // //   if (step === 3) {\n// // //     return (\n// // //       <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n// // //         <div className=\"max-w-md w-full space-y-8\">\n// // //           <div className=\"text-center\">\n// // //             <h2 className=\"text-3xl font-extrabold text-gray-900\">Registration Complete</h2>\n// // //             <p className=\"mt-2 text-sm text-gray-600\">Please proceed to login with your credentials.</p>\n// // //           </div>\n// // //           <button\n// // //             onClick={() => navigate(\"/login\")}\n// // //             className=\"w-full py-2 px-4 rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700\"\n// // //           >\n// // //             Proceed to Login\n// // //           </button>\n// // //         </div>\n// // //       </div>\n// // //     );\n// // //   }\n\n// // //   // Step 2: OTP Verification\n// // //   if (step === 2) {\n// // //     return (\n// // //       <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n// // //         <div id=\"recaptcha-container\"></div>\n// // //         <div className=\"max-w-md w-full space-y-8\">\n// // //           <div className=\"text-center\">\n// // //             <h2 className=\"text-3xl font-extrabold text-gray-900\">Verify OTP</h2>\n// // //             <p className=\"mt-2 text-sm text-gray-600\">Enter the 6-digit OTP sent to +91 {mobileForOtp}</p>\n// // //           </div>\n// // //           {message && <div className=\"p-3 bg-green-50 text-green-700 rounded-md\">{message}</div>}\n// // //           {error && <div className=\"p-3 bg-red-50 text-red-700 rounded-md\">{error}</div>}\n\n// // //           <input\n// // //             type=\"text\"\n// // //             value={otp}\n// // //             onChange={(e) => setOtp(e.target.value.replace(/\\D/g, \"\").slice(0, 6))}\n// // //             placeholder=\"Enter 6-digit OTP\"\n// // //             className=\"w-full px-3 py-2 border rounded-md text-center text-lg tracking-widest\"\n// // //           />\n// // //           <button\n// // //             onClick={verifyOtp}\n// // //             disabled={loading || otp.length !== 6}\n// // //             className=\"w-full py-2 px-4 rounded-md text-white bg-indigo-600 hover:bg-indigo-700\"\n// // //           >\n// // //             {loading ? \"Verifying...\" : \"Verify OTP\"}\n// // //           </button>\n// // //           <button\n// // //             onClick={() => sendOtp(mobileForOtp)}\n// // //             disabled={loading}\n// // //             className=\"w-full py-2 px-4 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200\"\n// // //           >\n// // //             Resend OTP\n// // //           </button>\n// // //           <button\n// // //             onClick={() => setStep(1)}\n// // //             className=\"w-full py-2 text-indigo-600 hover:text-indigo-800\"\n// // //           >\n// // //             ← Back to Signup\n// // //           </button>\n// // //         </div>\n// // //       </div>\n// // //     );\n// // //   }\n\n// // //   // Step 1: Signup Form\n// // //   return (\n// // //     <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n// // //       <div id=\"recaptcha-container\"></div>\n// // //       <div className=\"max-w-md w-full space-y-8\">\n// // //         <div className=\"text-center\">\n// // //           <h2 className=\"text-3xl font-extrabold text-gray-900\">Create your account</h2>\n// // //           <p className=\"mt-2 text-sm text-gray-600\">\n// // //             Or{\" \"}\n// // //             <Link to=\"/login\" className=\"font-medium text-indigo-600 hover:text-indigo-500\">\n// // //               sign in to your account\n// // //             </Link>\n// // //           </p>\n// // //         </div>\n\n// // //         <Formik\n// // //           initialValues={{ name: \"\", email: \"\", mobileNumber: \"\", password: \"\", confirmPassword: \"\" }}\n// // //           validationSchema={validationSchema}\n// // //           onSubmit={handleFormSubmit}\n// // //         >\n// // //           {({ isValid, dirty }) => (\n// // //             <Form className=\"space-y-6\">\n// // //               <div>\n// // //                 <label className=\"block text-sm font-medium\">Full Name</label>\n// // //                 <Field name=\"name\" type=\"text\" className=\"mt-1 block w-full border rounded-md\" />\n// // //                 <ErrorMessage name=\"name\" component=\"div\" className=\"text-sm text-red-600\" />\n// // //               </div>\n// // //               <div>\n// // //                 <label className=\"block text-sm font-medium\">Email (optional)</label>\n// // //                 <Field name=\"email\" type=\"email\" className=\"mt-1 block w-full border rounded-md\" />\n// // //                 <ErrorMessage name=\"email\" component=\"div\" className=\"text-sm text-red-600\" />\n// // //               </div>\n// // //               <div>\n// // //                 <label className=\"block text-sm font-medium\">Mobile Number</label>\n// // //                 <div className=\"flex mt-1\">\n// // //                   <span className=\"px-3 py-2 border bg-gray-50\">+91</span>\n// // //                   <Field name=\"mobileNumber\" type=\"tel\" maxLength=\"10\" className=\"flex-1 px-3 py-2 border rounded-r-md\" />\n// // //                 </div>\n// // //                 <ErrorMessage name=\"mobileNumber\" component=\"div\" className=\"text-sm text-red-600\" />\n// // //               </div>\n// // //               <div>\n// // //                 <label className=\"block text-sm font-medium\">Password</label>\n// // //                 <Field name=\"password\" type=\"password\" className=\"mt-1 block w-full border rounded-md\" />\n// // //                 <ErrorMessage name=\"password\" component=\"div\" className=\"text-sm text-red-600\" />\n// // //               </div>\n// // //               <div>\n// // //                 <label className=\"block text-sm font-medium\">Confirm Password</label>\n// // //                 <Field name=\"confirmPassword\" type=\"password\" className=\"mt-1 block w-full border rounded-md\" />\n// // //                 <ErrorMessage name=\"confirmPassword\" component=\"div\" className=\"text-sm text-red-600\" />\n// // //               </div>\n// // //               {error && <div className=\"bg-red-50 p-3 text-sm text-red-700 rounded-md\">{error}</div>}\n// // //               <button\n// // //                 type=\"submit\"\n// // //                 disabled={loading || !isValid || !dirty}\n// // //                 className=\"w-full py-2 px-4 rounded-md text-white bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50\"\n// // //               >\n// // //                 {loading ? \"Sending OTP...\" : \"Sign Up\"}\n// // //               </button>\n// // //             </Form>\n// // //           )}\n// // //         </Formik>\n// // //       </div>\n// // //     </div>\n// // //   );\n// // // };\n\n// // // export default SignupForm;\n\n// // import React, { useState, useEffect } from \"react\";\n// // import { Formik, Form, Field, ErrorMessage } from \"formik\";\n// // import * as Yup from \"yup\";\n// // import { Link, useNavigate } from \"react-router-dom\";\n// // import { auth, RecaptchaVerifier, signInWithPhoneNumber } from \"../../firebase\";\n// // import { authAPI } from \"../../services/api\";\n\n// // const SignupForm = () => {\n// //   const [step, setStep] = useState(1); // 1 = form, 2 = OTP, 3 = success\n// //   const [loading, setLoading] = useState(false);\n// //   const [error, setError] = useState(\"\");\n// //   const [message, setMessage] = useState(\"\");\n// //   const [mobileForOtp, setMobileForOtp] = useState(\"\");\n// //   const [otp, setOtp] = useState(\"\");\n// //   const [formData, setFormData] = useState(null);\n// //   const navigate = useNavigate();\n\n// //   // ✅ Validation schema\n// //   const validationSchema = Yup.object({\n// //     name: Yup.string().min(2).max(50).required(\"Name is required\"),\n// //     email: Yup.string().email(\"Invalid email\").nullable(),\n// //     mobileNumber: Yup.string()\n// //       .matches(/^[0-9]{10}$/, \"Enter valid 10-digit mobile number\")\n// //       .required(\"Mobile number is required\"),\n// //     password: Yup.string()\n// //       .min(6)\n// //       .matches(/^(?=.*[a-zA-Z])(?=.*\\d).+$/, \"At least one letter & one number\")\n// //       .required(\"Password is required\"),\n// //     confirmPassword: Yup.string()\n// //       .oneOf([Yup.ref(\"password\"), null], \"Passwords must match\")\n// //       .required(\"Confirm password is required\"),\n// //   });\n\n// //   // ✅ Setup reCAPTCHA\n// //   const setupRecaptcha = () => {\n// //     if (!window.recaptchaVerifier) {\n// //       window.recaptchaVerifier = new RecaptchaVerifier(\n// //         \"recaptcha-container\",\n// //         {\n// //           size: \"invisible\", // can be 'normal' if you want visible recaptcha\n// //           callback: (response) => {\n// //             console.log(\"Recaptcha solved:\", response);\n// //           },\n// //         },\n// //         auth\n// //       );\n// //     }\n// //   };\n\n// //   // ✅ Send OTP\n// //   const sendOtp = async (mobile) => {\n// //     setLoading(true);\n// //     setError(\"\");\n// //     setMessage(\"\");\n\n// //     try {\n// //       setupRecaptcha();\n// //       const phoneNumber = `+91${mobile}`;\n// //       const appVerifier = window.recaptchaVerifier;\n\n// //       const confirmationResult = await signInWithPhoneNumber(\n// //         auth,\n// //         phoneNumber,\n// //         appVerifier\n// //       );\n\n// //       window.confirmationResult = confirmationResult;\n// //       setMessage(\"OTP sent successfully ✅\");\n// //       setMobileForOtp(mobile);\n// //       setStep(2);\n// //     } catch (err) {\n// //       console.error(\"OTP Error:\", err);\n// //       setError(err.message || \"Failed to send OTP.\");\n// //     } finally {\n// //       setLoading(false);\n// //     }\n// //   };\n\n// //   // ✅ Verify OTP + complete signup\n// //   const verifyOtp = async () => {\n// //     setLoading(true);\n// //     setError(\"\");\n\n// //     try {\n// //       await window.confirmationResult.confirm(otp);\n\n// //       const response = await authAPI.completeSignup({\n// //         ...formData,\n// //         mobileNumber: mobileForOtp,\n// //       })\n\n// //       if (response.success) {\n// //         setMessage(\n// //           `Signup successful ✅ Your User ID: ${response.data.userId}`\n// //         );\n// //         console.log(\"All User IDs for this number:\", response.data.allUserIds);\n// //         setStep(3);\n// //       } else {\n// //         throw new Error(response.message || \"Signup failed\");\n// //       }\n// //     } catch (err) {\n// //       console.error(\"Signup OTP error:\", err);\n// //       setError(err.message || \"Invalid OTP. Please try again.\");\n// //     } finally {\n// //       setLoading(false);\n// //     }\n// //   };\n\n// //   // ✅ Handle signup form submit\n// //   const handleFormSubmit = async (values) => {\n// //     setFormData(values);\n// //     await sendOtp(values.mobileNumber);\n// //   };\n\n// //   // ================= Screens =================\n\n// //   // Step 3: Success\n// //   if (step === 3) {\n// //     return (\n// //       <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-6\">\n// //         <div className=\"max-w-md w-full space-y-6 text-center\">\n// //           <h2 className=\"text-2xl font-bold text-green-600\">\n// //             Registration Complete 🎉\n// //           </h2>\n// //           <p className=\"text-gray-600\">Proceed to login with your credentials.</p>\n// //           <button\n// //             onClick={() => navigate(\"/login\")}\n// //             className=\"w-full py-2 px-4 rounded-md bg-indigo-600 text-white hover:bg-indigo-700\"\n// //           >\n// //             Go to Login\n// //           </button>\n// //         </div>\n// //       </div>\n// //     );\n// //   }\n\n// //   // Step 2: OTP Verification\n// //   if (step === 2) {\n// //     return (\n// //       <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-6\">\n// //         <div id=\"recaptcha-container\"></div>\n// //         <div className=\"max-w-md w-full space-y-6 text-center\">\n// //           <h2 className=\"text-xl font-bold\">Verify OTP</h2>\n// //           <p className=\"text-gray-600\">Enter the OTP sent to +91 {mobileForOtp}</p>\n\n// //           {message && <p className=\"text-green-600\">{message}</p>}\n// //           {error && <p className=\"text-red-600\">{error}</p>}\n\n// //           <input\n// //             type=\"text\"\n// //             value={otp}\n// //             onChange={(e) => setOtp(e.target.value.replace(/\\D/g, \"\").slice(0, 6))}\n// //             placeholder=\"Enter 6-digit OTP\"\n// //             className=\"w-full px-3 py-2 border rounded-md text-center\"\n// //           />\n\n// //           <button\n// //             onClick={verifyOtp}\n// //             disabled={loading || otp.length !== 6}\n// //             className=\"w-full py-2 mt-2 bg-indigo-600 text-white rounded-md\"\n// //           >\n// //             {loading ? \"Verifying...\" : \"Verify OTP\"}\n// //           </button>\n\n// //           <button\n// //             onClick={() => sendOtp(mobileForOtp)}\n// //             disabled={loading}\n// //             className=\"w-full py-2 mt-2 bg-gray-100 text-gray-700 rounded-md\"\n// //           >\n// //             Resend OTP\n// //           </button>\n// //         </div>\n// //       </div>\n// //     );\n// //   }\n\n// //   // Step 1: Registration Form\n// //   return (\n// //     <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-6\">\n// //       <div id=\"recaptcha-container\"></div>\n// //       <div className=\"max-w-md w-full space-y-6\">\n// //         <h2 className=\"text-2xl font-bold text-center\">Create your account</h2>\n\n// //         <Formik\n// //           initialValues={{\n// //             name: \"\",\n// //             email: \"\",\n// //             mobileNumber: \"\",\n// //             password: \"\",\n// //             confirmPassword: \"\",\n// //           }}\n// //           validationSchema={validationSchema}\n// //           onSubmit={handleFormSubmit}\n// //         >\n// //           {({ isValid, dirty }) => (\n// //             <Form className=\"space-y-4\">\n// //               {/* Name */}\n// //               <div>\n// //                 <label className=\"block text-sm font-medium\">Full Name</label>\n// //                 <Field\n// //                   name=\"name\"\n// //                   type=\"text\"\n// //                   className=\"mt-1 w-full px-3 py-2 border rounded-md\"\n// //                 />\n// //                 <ErrorMessage\n// //                   name=\"name\"\n// //                   component=\"div\"\n// //                   className=\"text-sm text-red-600\"\n// //                 />\n// //               </div>\n\n// //               {/* Email */}\n// //               <div>\n// //                 <label className=\"block text-sm font-medium\">Email (optional)</label>\n// //                 <Field\n// //                   name=\"email\"\n// //                   type=\"email\"\n// //                   className=\"mt-1 w-full px-3 py-2 border rounded-md\"\n// //                 />\n// //                 <ErrorMessage\n// //                   name=\"email\"\n// //                   component=\"div\"\n// //                   className=\"text-sm text-red-600\"\n// //                 />\n// //               </div>\n\n// //               {/* Mobile */}\n// //               <div>\n// //                 <label className=\"block text-sm font-medium\">Mobile Number</label>\n// //                 <div className=\"flex mt-1\">\n// //                   <span className=\"px-3 py-2 border bg-gray-50 text-gray-500\">\n// //                     +91\n// //                   </span>\n// //                   <Field\n// //                     name=\"mobileNumber\"\n// //                     type=\"tel\"\n// //                     maxLength=\"10\"\n// //                     placeholder=\"9876543210\"\n// //                     className=\"flex-1 px-3 py-2 border rounded-r-md\"\n// //                   />\n// //                 </div>\n// //                 <ErrorMessage\n// //                   name=\"mobileNumber\"\n// //                   component=\"div\"\n// //                   className=\"text-sm text-red-600\"\n// //                 />\n// //               </div>\n\n// //               {/* Password */}\n// //               <div>\n// //                 <label className=\"block text-sm font-medium\">Password</label>\n// //                 <Field\n// //                   name=\"password\"\n// //                   type=\"password\"\n// //                   className=\"mt-1 w-full px-3 py-2 border rounded-md\"\n// //                 />\n// //                 <ErrorMessage\n// //                   name=\"password\"\n// //                   component=\"div\"\n// //                   className=\"text-sm text-red-600\"\n// //                 />\n// //               </div>\n\n// //               {/* Confirm Password */}\n// //               <div>\n// //                 <label className=\"block text-sm font-medium\">Confirm Password</label>\n// //                 <Field\n// //                   name=\"confirmPassword\"\n// //                   type=\"password\"\n// //                   className=\"mt-1 w-full px-3 py-2 border rounded-md\"\n// //                 />\n// //                 <ErrorMessage\n// //                   name=\"confirmPassword\"\n// //                   component=\"div\"\n// //                   className=\"text-sm text-red-600\"\n// //                 />\n// //               </div>\n\n// //               {error && (\n// //                 <div className=\"bg-red-50 p-3 text-sm text-red-700 rounded-md\">\n// //                   {error}\n// //                 </div>\n// //               )}\n\n// //               <button\n// //                 type=\"submit\"\n// //                 disabled={loading || !isValid || !dirty}\n// //                 className=\"w-full py-2 px-4 rounded-md bg-indigo-600 text-white disabled:opacity-50\"\n// //               >\n// //                 {loading ? \"Sending OTP...\" : \"Sign Up\"}\n// //               </button>\n// //             </Form>\n// //           )}\n// //         </Formik>\n// //       </div>\n// //     </div>\n// //   );\n// // };\n\n// // export default SignupForm;/\n\n// import React, { useState, useEffect } from \"react\";\n// import { Formik, Form, Field, ErrorMessage } from \"formik\";\n// import * as Yup from \"yup\";\n// import { Link, useNavigate } from \"react-router-dom\";\n// import { auth, RecaptchaVerifier, signInWithPhoneNumber } from \"../../firebase\";\n// import { authAPI } from \"../../services/api\";\n\n// const SignupForm = () => {\n//   const [step, setStep] = useState(1); // 1 = form, 2 = OTP, 3 = success\n//   const [loading, setLoading] = useState(false);\n//   const [error, setError] = useState(\"\");\n//   const [message, setMessage] = useState(\"\");\n//   const [mobileForOtp, setMobileForOtp] = useState(\"\");\n//   const [otp, setOtp] = useState(\"\");\n//   const [formData, setFormData] = useState(null);\n//   const navigate = useNavigate();\n\n//   // ✅ Validation schema\n//   const validationSchema = Yup.object({\n//     name: Yup.string().min(2).max(50).required(\"Name is required\"),\n//     email: Yup.string().email(\"Invalid email\").nullable(),\n//     mobileNumber: Yup.string()\n//       .matches(/^[0-9]{10}$/, \"Enter valid 10-digit mobile number\")\n//       .required(\"Mobile number is required\"),\n//     password: Yup.string()\n//       .min(6)\n//       .matches(/^(?=.*[a-zA-Z])(?=.*\\d).+$/, \"At least one letter & one number\")\n//       .required(\"Password is required\"),\n//     confirmPassword: Yup.string()\n//       .oneOf([Yup.ref(\"password\"), null], \"Passwords must match\")\n//       .required(\"Confirm password is required\"),\n//   });\n\n//   // ✅ Setup reCAPTCHA (only once)\n//   const setupRecaptcha = () => {\n//     if (!window.recaptchaVerifier) {\n//       window.recaptchaVerifier = new RecaptchaVerifier(\n//         \"recaptcha-container\",\n//         {\n//           size: \"invisible\",\n//           callback: (response) => {\n//             console.log(\"Recaptcha solved ✅\");\n//           },\n//         },\n//         auth\n//       );\n//     } else {\n//       // reset recaptcha if already exists\n//       window.recaptchaVerifier.clear();\n//       window.recaptchaVerifier = new RecaptchaVerifier(\n//         \"recaptcha-container\",\n//         { size: \"invisible\" },\n//         auth\n//       );\n//     }\n//   };\n\n//   // ✅ Send OTP\n//   const sendOtp = async (mobile) => {\n//     setLoading(true);\n//     setError(\"\");\n//     setMessage(\"\");\n\n//     try {\n//       setupRecaptcha();\n//       const phoneNumber = `+91${mobile}`;\n//       const appVerifier = window.recaptchaVerifier;\n\n//       const confirmationResult = await signInWithPhoneNumber(\n//         auth,\n//         phoneNumber,\n//         appVerifier\n//       );\n\n//       window.confirmationResult = confirmationResult;\n//       setMessage(\"OTP sent successfully ✅\");\n//       setMobileForOtp(mobile);\n//       setStep(2);\n//     } catch (err) {\n//       console.error(\"OTP Error:\", err);\n//       setError(err.message || \"Failed to send OTP.\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   // ✅ Verify OTP + complete signup\n//   const verifyOtp = async () => {\n//     setLoading(true);\n//     setError(\"\");\n\n//     try {\n//       await window.confirmationResult.confirm(otp);\n\n//       const response = await authAPI.completeSignup({\n//         ...formData,\n//         mobileNumber: mobileForOtp,\n//       });\n\n//       if (response.success) {\n//         setMessage(\n//           `Signup successful ✅ Your User ID: ${response.data.userId}`\n//         );\n//         console.log(\"All User IDs for this number:\", response.data.allUserIds);\n//         setStep(3);\n//       } else {\n//         throw new Error(response.message || \"Signup failed\");\n//       }\n//     } catch (err) {\n//       console.error(\"Signup OTP error:\", err);\n//       setError(err.message || \"Invalid OTP. Please try again.\");\n//     } finally {\n//       setLoading(false);\n//     }\n//   };\n\n//   // ✅ Handle signup form submit\n//   const handleFormSubmit = async (values) => {\n//     setFormData(values);\n//     await sendOtp(values.mobileNumber);\n//   };\n\n//   // ================= Screens =================\n\n//   // Step 3: Success\n//   if (step === 3) {\n//     return (\n//       <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-6\">\n//         <div className=\"max-w-md w-full space-y-6 text-center\">\n//           <h2 className=\"text-2xl font-bold text-green-600\">\n//             Registration Complete 🎉\n//           </h2>\n//           <p className=\"text-gray-600\">Proceed to login with your credentials.</p>\n//           <button\n//             onClick={() => navigate(\"/login\")}\n//             className=\"w-full py-2 px-4 rounded-md bg-indigo-600 text-white hover:bg-indigo-700\"\n//           >\n//             Go to Login\n//           </button>\n//         </div>\n//       </div>\n//     );\n//   }\n\n//   // Step 2: OTP Verification\n//   if (step === 2) {\n//     return (\n//       <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-6\">\n//         {/* Recaptcha div only once in the whole app */}\n//         <div id=\"recaptcha-container\"></div>\n//         <div className=\"max-w-md w-full space-y-6 text-center\">\n//           <h2 className=\"text-xl font-bold\">Verify OTP</h2>\n//           <p className=\"text-gray-600\">Enter the OTP sent to +91 {mobileForOtp}</p>\n\n//           {message && <p className=\"text-green-600\">{message}</p>}\n//           {error && <p className=\"text-red-600\">{error}</p>}\n\n//           <input\n//             type=\"text\"\n//             value={otp}\n//             onChange={(e) => setOtp(e.target.value.replace(/\\D/g, \"\").slice(0, 6))}\n//             placeholder=\"Enter 6-digit OTP\"\n//             className=\"w-full px-3 py-2 border rounded-md text-center\"\n//           />\n\n//           <button\n//             onClick={verifyOtp}\n//             disabled={loading || otp.length !== 6}\n//             className=\"w-full py-2 mt-2 bg-indigo-600 text-white rounded-md\"\n//           >\n//             {loading ? \"Verifying...\" : \"Verify OTP\"}\n//           </button>\n\n//           <button\n//             onClick={() => sendOtp(mobileForOtp)}\n//             disabled={loading}\n//             className=\"w-full py-2 mt-2 bg-gray-100 text-gray-700 rounded-md\"\n//           >\n//             Resend OTP\n//           </button>\n//         </div>\n//       </div>\n//     );\n//   }\n\n//   // Step 1: Registration Form\n//   return (\n//     <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-6\">\n//       {/* Recaptcha div should exist only once */}\n//       <div id=\"recaptcha-container\"></div>\n//       <div className=\"max-w-md w-full space-y-6\">\n//         <h2 className=\"text-2xl font-bold text-center\">Create your account</h2>\n\n//         <Formik\n//           initialValues={{\n//             name: \"\",\n//             email: \"\",\n//             mobileNumber: \"\",\n//             password: \"\",\n//             confirmPassword: \"\",\n//           }}\n//           validationSchema={validationSchema}\n//           onSubmit={handleFormSubmit}\n//         >\n//           {({ isValid, dirty }) => (\n//             <Form className=\"space-y-4\">\n//               {/* Name */}\n//               <div>\n//                 <label className=\"block text-sm font-medium\">Full Name</label>\n//                 <Field\n//                   name=\"name\"\n//                   type=\"text\"\n//                   className=\"mt-1 w-full px-3 py-2 border rounded-md\"\n//                 />\n//                 <ErrorMessage\n//                   name=\"name\"\n//                   component=\"div\"\n//                   className=\"text-sm text-red-600\"\n//                 />\n//               </div>\n\n//               {/* Email */}\n//               <div>\n//                 <label className=\"block text-sm font-medium\">Email (optional)</label>\n//                 <Field\n//                   name=\"email\"\n//                   type=\"email\"\n//                   className=\"mt-1 w-full px-3 py-2 border rounded-md\"\n//                 />\n//                 <ErrorMessage\n//                   name=\"email\"\n//                   component=\"div\"\n//                   className=\"text-sm text-red-600\"\n//                 />\n//               </div>\n\n//               {/* Mobile */}\n//               <div>\n//                 <label className=\"block text-sm font-medium\">Mobile Number</label>\n//                 <div className=\"flex mt-1\">\n//                   <span className=\"px-3 py-2 border bg-gray-50 text-gray-500\">\n//                     +91\n//                   </span>\n//                   <Field\n//                     name=\"mobileNumber\"\n//                     type=\"tel\"\n//                     maxLength=\"10\"\n//                     placeholder=\"9876543210\"\n//                     className=\"flex-1 px-3 py-2 border rounded-r-md\"\n//                   />\n//                 </div>\n//                 <ErrorMessage\n//                   name=\"mobileNumber\"\n//                   component=\"div\"\n//                   className=\"text-sm text-red-600\"\n//                 />\n//               </div>\n\n//               {/* Password */}\n//               <div>\n//                 <label className=\"block text-sm font-medium\">Password</label>\n//                 <Field\n//                   name=\"password\"\n//                   type=\"password\"\n//                   className=\"mt-1 w-full px-3 py-2 border rounded-md\"\n//                 />\n//                 <ErrorMessage\n//                   name=\"password\"\n//                   component=\"div\"\n//                   className=\"text-sm text-red-600\"\n//                 />\n//               </div>\n\n//               {/* Confirm Password */}\n//               <div>\n//                 <label className=\"block text-sm font-medium\">Confirm Password</label>\n//                 <Field\n//                   name=\"confirmPassword\"\n//                   type=\"password\"\n//                   className=\"mt-1 w-full px-3 py-2 border rounded-md\"\n//                 />\n//                 <ErrorMessage\n//                   name=\"confirmPassword\"\n//                   component=\"div\"\n//                   className=\"text-sm text-red-600\"\n//                 />\n//               </div>\n\n//               {error && (\n//                 <div className=\"bg-red-50 p-3 text-sm text-red-700 rounded-md\">\n//                   {error}\n//                 </div>\n//               )}\n\n//               <button\n//                 type=\"submit\"\n//                 disabled={loading || !isValid || !dirty}\n//                 className=\"w-full py-2 px-4 rounded-md bg-indigo-600 text-white disabled:opacity-50\"\n//               >\n//                 {loading ? \"Sending OTP...\" : \"Sign Up\"}\n//               </button>\n//             </Form>\n//           )}\n//         </Formik>\n//       </div>\n//     </div>\n//   );\n// };\n\n// export default SignupForm;\n\nimport React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport authAPI from \"../api/authApi\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function SignupForm() {\n  _s();\n  const navigate = useNavigate();\n  const [step, setStep] = useState(1);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(\"\");\n  const [message, setMessage] = useState(\"\");\n  const [otp, setOtp] = useState(\"\");\n  const [mobileForOtp, setMobileForOtp] = useState(\"\");\n  const [formData, setFormData] = useState({\n    name: \"\",\n    email: \"\",\n    password: \"\",\n    mobileNumber: \"\",\n    userId: \"\"\n  });\n\n  // ✅ Handle form input change\n  const handleChange = e => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  // ✅ Send OTP\n  const sendOtp = async () => {\n    setLoading(true);\n    setError(\"\");\n    try {\n      const response = await authAPI.sendOtp(formData.mobileNumber);\n      if (response.success) {\n        setMessage(\"OTP sent successfully ✅\");\n        setMobileForOtp(formData.mobileNumber);\n        setStep(2);\n      } else {\n        throw new Error(response.message || \"Failed to send OTP\");\n      }\n    } catch (err) {\n      console.error(\"Send OTP error:\", err);\n      setError(err.message || \"Something went wrong.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // ✅ Verify OTP + complete signup\n  const verifyOtp = async () => {\n    setLoading(true);\n    setError(\"\");\n    try {\n      await window.confirmationResult.confirm(otp);\n      const response = await authAPI.completeSignup({\n        ...formData,\n        mobileNumber: mobileForOtp\n      });\n      if (response.success) {\n        setMessage(\"Signup successful ✅\");\n        setFormData({\n          ...formData,\n          userId: response.data.userId,\n          mobileNumber: response.data.mobileNumber\n        }); // ✅ save userId + mobile\n        setStep(3);\n      } else {\n        throw new Error(response.message || \"Signup failed\");\n      }\n    } catch (err) {\n      console.error(\"Signup OTP error:\", err);\n      setError(err.message || \"Invalid OTP. Please try again.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Step 1: Signup Form\n  if (step === 1) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-6\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-md w-full space-y-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-center text-3xl font-extrabold text-gray-900\",\n          children: \"Create your account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1893,\n          columnNumber: 11\n        }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-red-500 text-sm\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1897,\n          columnNumber: 21\n        }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-green-500 text-sm\",\n          children: message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1898,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"name\",\n          placeholder: \"Full Name\",\n          value: formData.name,\n          onChange: handleChange,\n          className: \"w-full px-3 py-2 border rounded\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1900,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"email\",\n          name: \"email\",\n          placeholder: \"Email Address\",\n          value: formData.email,\n          onChange: handleChange,\n          className: \"w-full px-3 py-2 border rounded\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1908,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          name: \"password\",\n          placeholder: \"Password\",\n          value: formData.password,\n          onChange: handleChange,\n          className: \"w-full px-3 py-2 border rounded\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1916,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"mobileNumber\",\n          placeholder: \"Mobile Number\",\n          value: formData.mobileNumber,\n          onChange: handleChange,\n          className: \"w-full px-3 py-2 border rounded\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1924,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: sendOtp,\n          disabled: loading,\n          className: \"w-full py-2 px-4 rounded-md bg-indigo-600 text-white hover:bg-indigo-700\",\n          children: loading ? \"Sending OTP...\" : \"Send OTP\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1933,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1892,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1891,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Step 2: OTP Verification\n  if (step === 2) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-6\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-md w-full space-y-6 text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold\",\n          children: \"Verify OTP\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1950,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600\",\n          children: [\"OTP sent to \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: mobileForOtp\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1952,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1951,\n          columnNumber: 11\n        }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-red-500 text-sm\",\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1955,\n          columnNumber: 21\n        }, this), message && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-green-500 text-sm\",\n          children: message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1956,\n          columnNumber: 23\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Enter OTP\",\n          value: otp,\n          onChange: e => setOtp(e.target.value),\n          className: \"w-full px-3 py-2 border rounded\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1958,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: verifyOtp,\n          disabled: loading,\n          className: \"w-full py-2 px-4 rounded-md bg-green-600 text-white hover:bg-green-700\",\n          children: loading ? \"Verifying...\" : \"Verify & Complete Signup\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1966,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1949,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1948,\n      columnNumber: 7\n    }, this);\n  }\n\n  // Step 3: Success\n  if (step === 3) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-6\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-md w-full space-y-6 text-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold text-green-600\",\n          children: \"Registration Complete \\uD83C\\uDF89\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1983,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-700\",\n          children: [\"Your User ID: \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: formData === null || formData === void 0 ? void 0 : formData.userId\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1988,\n            columnNumber: 27\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1987,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-700\",\n          children: [\"Registered Mobile: \", /*#__PURE__*/_jsxDEV(\"b\", {\n            children: formData === null || formData === void 0 ? void 0 : formData.mobileNumber\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1991,\n            columnNumber: 32\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 1990,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-600 mt-4\",\n          children: \"Proceed to login with your credentials.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1994,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => navigate(\"/login\"),\n          className: \"w-full py-2 px-4 rounded-md bg-indigo-600 text-white hover:bg-indigo-700\",\n          children: \"Go to Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1998,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1982,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1981,\n      columnNumber: 7\n    }, this);\n  }\n}\n_s(SignupForm, \"4BYAMOrb2kO9CaERsTdZb2LUbdA=\", false, function () {\n  return [useNavigate];\n});\n_c = SignupForm;\nvar _c;\n$RefreshReg$(_c, \"SignupForm\");","map":{"version":3,"names":["React","useState","useNavigate","authAPI","jsxDEV","_jsxDEV","SignupForm","_s","navigate","step","setStep","loading","setLoading","error","setError","message","setMessage","otp","setOtp","mobileForOtp","setMobileForOtp","formData","setFormData","name","email","password","mobileNumber","userId","handleChange","e","target","value","sendOtp","response","success","Error","err","console","verifyOtp","window","confirmationResult","confirm","completeSignup","data","className","children","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","onClick","disabled","_c","$RefreshReg$"],"sources":["C:/Users/moazz/Desktop/frontend/src/components/auth/SignupForm.js"],"sourcesContent":["// // // // // // import React, { useState, useEffect } from 'react';\r\n// // // // // // import { Formik, Form, Field, ErrorMessage } from 'formik';\r\n// // // // // // import * as Yup from 'yup';\r\n// // // // // // import { Link, useNavigate } from 'react-router-dom';\r\n// // // // // // import { auth, RecaptchaVerifier, signInWithPhoneNumber } from '../../firebase';\r\n// // // // // // import { authAPI } from '../../services/api';\r\n\r\n// // // // // // const SignupForm = () => {\r\n// // // // // //   const [step, setStep] = useState(1); // 1: form, 2: otp, 3: success\r\n// // // // // //   const [loading, setLoading] = useState(false);\r\n// // // // // //   const [error, setError] = useState('');\r\n// // // // // //   const [message, setMessage] = useState('');\r\n// // // // // //   const [mobileForOtp, setMobileForOtp] = useState('');\r\n// // // // // //   const [otp, setOtp] = useState('');\r\n// // // // // //   const [generatedUserId, setGeneratedUserId] = useState('');\r\n// // // // // //   const [formData, setFormData] = useState(null);\r\n// // // // // //   const navigate = useNavigate();\r\n\r\n// // // // // //   // ✅ Validation\r\n// // // // // //   const validationSchema = Yup.object({\r\n// // // // // //     name: Yup.string()\r\n// // // // // //       .min(2, 'Name must be at least 2 characters')\r\n// // // // // //       .max(50, 'Name cannot exceed 50 characters')\r\n// // // // // //       .required('Name is required'),\r\n// // // // // //     email: Yup.string().email('Please enter a valid email address').nullable(),\r\n// // // // // //     mobileNumber: Yup.string()\r\n// // // // // //       .matches(/^[0-9]{10}$/, 'Please enter a valid 10-digit mobile number')\r\n// // // // // //       .required('Mobile number is required'),\r\n// // // // // //     password: Yup.string()\r\n// // // // // //       .min(6, 'Password must be at least 6 characters')\r\n// // // // // //       .matches(/^(?=.*[a-zA-Z])(?=.*\\d).+$/, 'Password must contain at least one letter and one number')\r\n// // // // // //       .required('Password is required'),\r\n// // // // // //     confirmPassword: Yup.string()\r\n// // // // // //       .oneOf([Yup.ref('password'), null], 'Passwords must match')\r\n// // // // // //       .required('Confirm password is required'),\r\n// // // // // //   });\r\n\r\n// // // // // //   // ✅ Setup Recaptcha once\r\n// // // // // //   useEffect(() => {\r\n// // // // // //     if (!window.recaptchaVerifier) {\r\n// // // // // //       window.recaptchaVerifier = new RecaptchaVerifier(\r\n// // // // // //         'recaptcha-container',\r\n// // // // // //         { size: 'invisible' },\r\n// // // // // //         auth\r\n// // // // // //       );\r\n// // // // // //     }\r\n// // // // // //   }, []);\r\n\r\n// // // // // //   // ✅ Send OTP\r\n// // // // // //   const sendOtp = async (mobile) => {\r\n// // // // // //     setLoading(true);\r\n// // // // // //     setError('');\r\n// // // // // //     setMessage('');\r\n\r\n// // // // // //     try {\r\n// // // // // //       const phoneNumber = `+91${mobile}`;\r\n// // // // // //       const confirmationResult = await signInWithPhoneNumber(\r\n// // // // // //         auth,\r\n// // // // // //         phoneNumber,\r\n// // // // // //         window.recaptchaVerifier\r\n// // // // // //       );\r\n\r\n// // // // // //       window.confirmationResult = confirmationResult;\r\n// // // // // //       setMessage('OTP sent to your mobile number.');\r\n// // // // // //       setMobileForOtp(mobile);\r\n// // // // // //       setStep(2);\r\n// // // // // //     } catch (err) {\r\n// // // // // //       console.error(\"OTP Error:\", err);\r\n// // // // // //       if (err.code === \"auth/invalid-app-credential\") {\r\n// // // // // //         setError(\"Firebase config invalid है। .env values और storageBucket check करो।\");\r\n// // // // // //       } else if (err.code === \"auth/missing-phone-number\") {\r\n// // // // // //         setError(\"Phone number सही format में दो (+91XXXXXXXXXX).\");\r\n// // // // // //       } else {\r\n// // // // // //         setError(err.message || 'Failed to send OTP. Please try again.');\r\n// // // // // //       }\r\n// // // // // //     } finally {\r\n// // // // // //       setLoading(false);\r\n// // // // // //     }\r\n// // // // // //   };\r\n\r\n// // // // // //   // ✅ Verify OTP\r\n// // // // // //   const verifyOtp = async () => {\r\n// // // // // //     setLoading(true);\r\n// // // // // //     setError('');\r\n\r\n// // // // // //     try {\r\n// // // // // //       await window.confirmationResult.confirm(otp);\r\n\r\n// // // // // //       // Generate user ID\r\n// // // // // //       const userId = await generateUserId(mobileForOtp);\r\n// // // // // //       setGeneratedUserId(userId);\r\n\r\n// // // // // //       // Complete signup\r\n// // // // // //       const response = await authAPI.completeSignup({\r\n// // // // // //         ...formData,\r\n// // // // // //         userId\r\n// // // // // //       });\r\n\r\n// // // // // //       if (response.success) {\r\n// // // // // //         setMessage('Account created successfully!');\r\n// // // // // //         setStep(3);\r\n// // // // // //       } else {\r\n// // // // // //         throw new Error(response.message || 'Signup failed');\r\n// // // // // //       }\r\n// // // // // //     } catch (err) {\r\n// // // // // //       setError(err.message || 'Invalid OTP. Please try again.');\r\n// // // // // //     } finally {\r\n// // // // // //       setLoading(false);\r\n// // // // // //     }\r\n// // // // // //   };\r\n\r\n// // // // // //   // ✅ Generate User ID\r\n// // // // // //   const generateUserId = async (mobileNumber) => {\r\n// // // // // //     try {\r\n// // // // // //       const response = await authAPI.generateUserId({ mobileNumber });\r\n// // // // // //       if (response.success) return response.userId;\r\n// // // // // //       throw new Error(response.message || 'Failed to generate user ID');\r\n// // // // // //     } catch (err) {\r\n// // // // // //       throw err;\r\n// // // // // //     }\r\n// // // // // //   };\r\n\r\n// // // // // //   // ✅ Handle Signup Submit\r\n// // // // // //   const handleFormSubmit = async (values) => {\r\n// // // // // //     setFormData(values);\r\n// // // // // //     await sendOtp(values.mobileNumber);\r\n// // // // // //   };\r\n\r\n// // // // // //   // ==================== SCREENS ====================\r\n\r\n// // // // // //   // Step 3: Success\r\n// // // // // //   if (step === 3) {\r\n// // // // // //     return (\r\n// // // // // //       <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\r\n// // // // // //         <div className=\"max-w-md w-full space-y-8\">\r\n// // // // // //           <div className=\"text-center\">\r\n// // // // // //             <h2 className=\"text-3xl font-extrabold text-gray-900\">Registration Complete</h2>\r\n// // // // // //             <p className=\"mt-4 text-lg\">\r\n// // // // // //               Your User ID: <span className=\"font-bold\">{generatedUserId}</span>\r\n// // // // // //             </p>\r\n// // // // // //             <p className=\"mt-2 text-sm text-gray-600\">\r\n// // // // // //               Please note this ID carefully as you'll need it to login.\r\n// // // // // //             </p>\r\n// // // // // //           </div>\r\n// // // // // //           <div className=\"mt-6\">\r\n// // // // // //             <button\r\n// // // // // //               onClick={() => navigate('/login')}\r\n// // // // // //               className=\"w-full py-2 px-4 rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700\"\r\n// // // // // //             >\r\n// // // // // //               Proceed to Login\r\n// // // // // //             </button>\r\n// // // // // //           </div>\r\n// // // // // //         </div>\r\n// // // // // //       </div>\r\n// // // // // //     );\r\n// // // // // //   }\r\n\r\n// // // // // //   // Step 2: OTP Verification\r\n// // // // // //   if (step === 2) {\r\n// // // // // //     return (\r\n// // // // // //       <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\r\n// // // // // //         <div id=\"recaptcha-container\"></div>\r\n// // // // // //         <div className=\"max-w-md w-full space-y-8\">\r\n// // // // // //           <div className=\"text-center\">\r\n// // // // // //             <h2 className=\"text-3xl font-extrabold text-gray-900\">Verify OTP</h2>\r\n// // // // // //             <p className=\"mt-2 text-sm text-gray-600\">\r\n// // // // // //               Enter the 6-digit OTP sent to +91 {mobileForOtp}\r\n// // // // // //             </p>\r\n// // // // // //           </div>\r\n\r\n// // // // // //           {message && <div className=\"p-3 bg-green-50 text-green-700 rounded-md text-sm\">{message}</div>}\r\n// // // // // //           {error && <div className=\"p-3 bg-red-50 text-red-700 rounded-md text-sm\">{error}</div>}\r\n\r\n// // // // // //           <div className=\"space-y-4\">\r\n// // // // // //             <input\r\n// // // // // //               type=\"text\"\r\n// // // // // //               value={otp}\r\n// // // // // //               onChange={(e) => setOtp(e.target.value.replace(/\\D/g, '').slice(0, 6))}\r\n// // // // // //               placeholder=\"Enter 6-digit OTP\"\r\n// // // // // //               className=\"w-full px-3 py-2 border rounded-md text-center text-lg tracking-widest\"\r\n// // // // // //               inputMode=\"numeric\"\r\n// // // // // //               autoFocus\r\n// // // // // //             />\r\n// // // // // //             <button\r\n// // // // // //               onClick={verifyOtp}\r\n// // // // // //               disabled={loading || otp.length !== 6}\r\n// // // // // //               className=\"w-full py-2 px-4 rounded-md text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50\"\r\n// // // // // //             >\r\n// // // // // //               {loading ? 'Verifying...' : 'Verify OTP'}\r\n// // // // // //             </button>\r\n// // // // // //             <button\r\n// // // // // //               onClick={() => sendOtp(mobileForOtp)}\r\n// // // // // //               disabled={loading}\r\n// // // // // //               className=\"w-full py-2 px-4 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 text-sm\"\r\n// // // // // //             >\r\n// // // // // //               Resend OTP\r\n// // // // // //             </button>\r\n// // // // // //             <button\r\n// // // // // //               onClick={() => { setStep(1); setError(''); setMessage(''); }}\r\n// // // // // //               className=\"w-full py-2 text-indigo-600 hover:text-indigo-800 text-sm\"\r\n// // // // // //             >\r\n// // // // // //               ← Back to Signup\r\n// // // // // //             </button>\r\n// // // // // //           </div>\r\n// // // // // //         </div>\r\n// // // // // //       </div>\r\n// // // // // //     );\r\n// // // // // //   }\r\n\r\n// // // // // //   // Step 1: Registration Form\r\n// // // // // //   return (\r\n// // // // // //     <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\r\n// // // // // //       <div id=\"recaptcha-container\"></div>\r\n// // // // // //       <div className=\"max-w-md w-full space-y-8\">\r\n// // // // // //         <div className=\"text-center\">\r\n// // // // // //           <h2 className=\"text-3xl font-extrabold text-gray-900\">Create your account</h2>\r\n// // // // // //           <p className=\"mt-2 text-sm text-gray-600\">\r\n// // // // // //             Or{' '}\r\n// // // // // //             <Link to=\"/login\" className=\"font-medium text-indigo-600 hover:text-indigo-500\">\r\n// // // // // //               sign in to your account\r\n// // // // // //             </Link>\r\n// // // // // //           </p>\r\n// // // // // //         </div>\r\n\r\n// // // // // //         <Formik\r\n// // // // // //           initialValues={{ name: '', email: '', mobileNumber: '', password: '', confirmPassword: '' }}\r\n// // // // // //           validationSchema={validationSchema}\r\n// // // // // //           onSubmit={handleFormSubmit}\r\n// // // // // //         >\r\n// // // // // //           {({ isValid, dirty }) => (\r\n// // // // // //             <Form className=\"mt-8 space-y-6\">\r\n// // // // // //               <div className=\"space-y-4\">\r\n// // // // // //                 {/* Name */}\r\n// // // // // //                 <div>\r\n// // // // // //                   <label className=\"block text-sm font-medium\">Full Name</label>\r\n// // // // // //                   <Field name=\"name\" type=\"text\" placeholder=\"Your full name\"\r\n// // // // // //                     className=\"mt-1 block w-full px-3 py-2 border rounded-md\" />\r\n// // // // // //                   <ErrorMessage name=\"name\" component=\"div\" className=\"text-sm text-red-600\" />\r\n// // // // // //                 </div>\r\n\r\n// // // // // //                 {/* Email */}\r\n// // // // // //                 <div>\r\n// // // // // //                   <label className=\"block text-sm font-medium\">Email (optional)</label>\r\n// // // // // //                   <Field name=\"email\" type=\"email\" placeholder=\"your.email@example.com\"\r\n// // // // // //                     className=\"mt-1 block w-full px-3 py-2 border rounded-md\" />\r\n// // // // // //                   <ErrorMessage name=\"email\" component=\"div\" className=\"text-sm text-red-600\" />\r\n// // // // // //                 </div>\r\n\r\n// // // // // //                 {/* Mobile */}\r\n// // // // // //                 <div>\r\n// // // // // //                   <label className=\"block text-sm font-medium\">Mobile Number</label>\r\n// // // // // //                   <div className=\"flex mt-1\">\r\n// // // // // //                     <span className=\"px-3 py-2 border bg-gray-50 text-gray-500\">+91</span>\r\n// // // // // //                     <Field name=\"mobileNumber\" type=\"tel\" maxLength=\"10\" placeholder=\"9876543210\"\r\n// // // // // //                       className=\"flex-1 px-3 py-2 border rounded-r-md\" />\r\n// // // // // //                   </div>\r\n// // // // // //                   <ErrorMessage name=\"mobileNumber\" component=\"div\" className=\"text-sm text-red-600\" />\r\n// // // // // //                 </div>\r\n\r\n// // // // // //                 {/* Password */}\r\n// // // // // //                 <div>\r\n// // // // // //                   <label className=\"block text-sm font-medium\">Password</label>\r\n// // // // // //                   <Field name=\"password\" type=\"password\" placeholder=\"At least 6 characters\"\r\n// // // // // //                     className=\"mt-1 block w-full px-3 py-2 border rounded-md\" />\r\n// // // // // //                   <ErrorMessage name=\"password\" component=\"div\" className=\"text-sm text-red-600\" />\r\n// // // // // //                 </div>\r\n\r\n// // // // // //                 {/* Confirm Password */}\r\n// // // // // //                 <div>\r\n// // // // // //                   <label className=\"block text-sm font-medium\">Confirm Password</label>\r\n// // // // // //                   <Field name=\"confirmPassword\" type=\"password\" placeholder=\"Confirm your password\"\r\n// // // // // //                     className=\"mt-1 block w-full px-3 py-2 border rounded-md\" />\r\n// // // // // //                   <ErrorMessage name=\"confirmPassword\" component=\"div\" className=\"text-sm text-red-600\" />\r\n// // // // // //                 </div>\r\n// // // // // //               </div>\r\n\r\n// // // // // //               {error && <div className=\"bg-red-50 p-3 text-sm text-red-700 rounded-md\">{error}</div>}\r\n\r\n// // // // // //               <button\r\n// // // // // //                 type=\"submit\"\r\n// // // // // //                 disabled={loading || !isValid || !dirty}\r\n// // // // // //                 className=\"w-full py-2 px-4 rounded-md text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50\"\r\n// // // // // //               >\r\n// // // // // //                 {loading ? 'Sending OTP...' : 'Sign Up'}\r\n// // // // // //               </button>\r\n// // // // // //             </Form>\r\n// // // // // //           )}\r\n// // // // // //         </Formik>\r\n// // // // // //       </div>\r\n// // // // // //     </div>\r\n// // // // // //   );\r\n// // // // // // };\r\n\r\n// // // // // // export default SignupForm;\r\n\r\n\r\n// // // // // import React, { useState, useEffect } from 'react';\r\n// // // // // import { Formik, Form, Field, ErrorMessage } from 'formik';\r\n// // // // // import * as Yup from 'yup';\r\n// // // // // import { Link, useNavigate } from 'react-router-dom';\r\n// // // // // import { auth, RecaptchaVerifier, signInWithPhoneNumber } from '../../firebase';\r\n// // // // // import { authAPI } from '../../services/api';\r\n\r\n// // // // // const SignupForm = () => {\r\n// // // // //   const [step, setStep] = useState(1); // 1: form, 2: otp, 3: success\r\n// // // // //   const [loading, setLoading] = useState(false);\r\n// // // // //   const [error, setError] = useState('');\r\n// // // // //   const [message, setMessage] = useState('');\r\n// // // // //   const [mobileForOtp, setMobileForOtp] = useState('');\r\n// // // // //   const [otp, setOtp] = useState('');\r\n// // // // //   const [formData, setFormData] = useState(null);\r\n// // // // //   const navigate = useNavigate();\r\n\r\n// // // // //   // ✅ Validation\r\n// // // // //   const validationSchema = Yup.object({\r\n// // // // //     name: Yup.string()\r\n// // // // //       .min(2, 'Name must be at least 2 characters')\r\n// // // // //       .max(50, 'Name cannot exceed 50 characters')\r\n// // // // //       .required('Name is required'),\r\n// // // // //     email: Yup.string().email('Please enter a valid email address').nullable(),\r\n// // // // //     mobileNumber: Yup.string()\r\n// // // // //       .matches(/^[0-9]{10}$/, 'Please enter a valid 10-digit mobile number')\r\n// // // // //       .required('Mobile number is required'),\r\n// // // // //     password: Yup.string()\r\n// // // // //       .min(6, 'Password must be at least 6 characters')\r\n// // // // //       .matches(/^(?=.*[a-zA-Z])(?=.*\\d).+$/, 'Password must contain at least one letter and one number')\r\n// // // // //       .required('Password is required'),\r\n// // // // //     confirmPassword: Yup.string()\r\n// // // // //       .oneOf([Yup.ref('password'), null], 'Passwords must match')\r\n// // // // //       .required('Confirm password is required'),\r\n// // // // //   });\r\n\r\n// // // // //   // ✅ Setup Recaptcha once\r\n// // // // //   useEffect(() => {\r\n// // // // //     if (!window.recaptchaVerifier) {\r\n// // // // //       window.recaptchaVerifier = new RecaptchaVerifier(\r\n// // // // //         'recaptcha-container',\r\n// // // // //         { size: 'invisible' },\r\n// // // // //         auth\r\n// // // // //       );\r\n// // // // //     }\r\n// // // // //   }, []);\r\n\r\n// // // // //   // ✅ Send OTP\r\n// // // // //   const sendOtp = async (mobile) => {\r\n// // // // //     setLoading(true);\r\n// // // // //     setError('');\r\n// // // // //     setMessage('');\r\n\r\n// // // // //     try {\r\n// // // // //       const phoneNumber = `+91${mobile}`;\r\n// // // // //       const confirmationResult = await signInWithPhoneNumber(\r\n// // // // //         auth,\r\n// // // // //         phoneNumber,\r\n// // // // //         window.recaptchaVerifier\r\n// // // // //       );\r\n\r\n// // // // //       window.confirmationResult = confirmationResult;\r\n// // // // //       setMessage('OTP sent to your mobile number.');\r\n// // // // //       setMobileForOtp(mobile);\r\n// // // // //       setStep(2);\r\n// // // // //     } catch (err) {\r\n// // // // //       console.error(\"OTP Error:\", err);\r\n// // // // //       if (err.code === \"auth/invalid-app-credential\") {\r\n// // // // //         setError(\"Firebase config invalid है। .env values और storageBucket check करो।\");\r\n// // // // //       } else if (err.code === \"auth/missing-phone-number\") {\r\n// // // // //         setError(\"Phone number सही format में दो (+91XXXXXXXXXX).\");\r\n// // // // //       } else {\r\n// // // // //         setError(err.message || 'Failed to send OTP. Please try again.');\r\n// // // // //       }\r\n// // // // //     } finally {\r\n// // // // //       setLoading(false);\r\n// // // // //     }\r\n// // // // //   };\r\n\r\n// // // // //   // ✅ Verify OTP (direct signup)\r\n// // // // //   const verifyOtp = async () => {\r\n// // // // //     setLoading(true);\r\n// // // // //     setError('');\r\n\r\n// // // // //     try {\r\n// // // // //       await window.confirmationResult.confirm(otp);\r\n\r\n// // // // //       // ✅ Directly complete signup (skip generateUserId)\r\n// // // // //       const response = await authAPI.completeSignup({\r\n// // // // //         ...formData,\r\n// // // // //         mobileNumber: mobileForOtp\r\n// // // // //       });\r\n\r\n// // // // //       if (response.success) {\r\n// // // // //         setMessage('Account created successfully!');\r\n// // // // //         setStep(3);\r\n// // // // //       } else {\r\n// // // // //         throw new Error(response.message || 'Signup failed');\r\n// // // // //       }\r\n// // // // //     } catch (err) {\r\n// // // // //       setError(err.message || 'Invalid OTP. Please try again.');\r\n// // // // //     } finally {\r\n// // // // //       setLoading(false);\r\n// // // // //     }\r\n// // // // //   };\r\n\r\n// // // // //   // ✅ Handle Signup Submit\r\n// // // // //   const handleFormSubmit = async (values) => {\r\n// // // // //     setFormData(values);\r\n// // // // //     await sendOtp(values.mobileNumber);\r\n// // // // //   };\r\n\r\n// // // // //   // ==================== SCREENS ====================\r\n\r\n// // // // //   // Step 3: Success\r\n// // // // //   if (step === 3) {\r\n// // // // //     return (\r\n// // // // //       <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\r\n// // // // //         <div className=\"max-w-md w-full space-y-8\">\r\n// // // // //           <div className=\"text-center\">\r\n// // // // //             <h2 className=\"text-3xl font-extrabold text-gray-900\">Registration Complete</h2>\r\n// // // // //             <p className=\"mt-2 text-sm text-gray-600\">\r\n// // // // //               Please proceed to login with your credentials.\r\n// // // // //             </p>\r\n// // // // //           </div>\r\n// // // // //           <div className=\"mt-6\">\r\n// // // // //             <button\r\n// // // // //               onClick={() => navigate('/login')}\r\n// // // // //               className=\"w-full py-2 px-4 rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700\"\r\n// // // // //             >\r\n// // // // //               Proceed to Login\r\n// // // // //             </button>\r\n// // // // //           </div>\r\n// // // // //         </div>\r\n// // // // //       </div>\r\n// // // // //     );\r\n// // // // //   }\r\n\r\n// // // // //   // Step 2: OTP Verification\r\n// // // // //   if (step === 2) {\r\n// // // // //     return (\r\n// // // // //       <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\r\n// // // // //         <div id=\"recaptcha-container\"></div>\r\n// // // // //         <div className=\"max-w-md w-full space-y-8\">\r\n// // // // //           <div className=\"text-center\">\r\n// // // // //             <h2 className=\"text-3xl font-extrabold text-gray-900\">Verify OTP</h2>\r\n// // // // //             <p className=\"mt-2 text-sm text-gray-600\">\r\n// // // // //               Enter the 6-digit OTP sent to +91 {mobileForOtp}\r\n// // // // //             </p>\r\n// // // // //           </div>\r\n\r\n// // // // //           {message && <div className=\"p-3 bg-green-50 text-green-700 rounded-md text-sm\">{message}</div>}\r\n// // // // //           {error && <div className=\"p-3 bg-red-50 text-red-700 rounded-md text-sm\">{error}</div>}\r\n\r\n// // // // //           <div className=\"space-y-4\">\r\n// // // // //             <input\r\n// // // // //               type=\"text\"\r\n// // // // //               value={otp}\r\n// // // // //               onChange={(e) => setOtp(e.target.value.replace(/\\D/g, '').slice(0, 6))}\r\n// // // // //               placeholder=\"Enter 6-digit OTP\"\r\n// // // // //               className=\"w-full px-3 py-2 border rounded-md text-center text-lg tracking-widest\"\r\n// // // // //               inputMode=\"numeric\"\r\n// // // // //               autoFocus\r\n// // // // //             />\r\n// // // // //             <button\r\n// // // // //               onClick={verifyOtp}\r\n// // // // //               disabled={loading || otp.length !== 6}\r\n// // // // //               className=\"w-full py-2 px-4 rounded-md text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50\"\r\n// // // // //             >\r\n// // // // //               {loading ? 'Verifying...' : 'Verify OTP'}\r\n// // // // //             </button>\r\n// // // // //             <button\r\n// // // // //               onClick={() => sendOtp(mobileForOtp)}\r\n// // // // //               disabled={loading}\r\n// // // // //               className=\"w-full py-2 px-4 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 text-sm\"\r\n// // // // //             >\r\n// // // // //               Resend OTP\r\n// // // // //             </button>\r\n// // // // //             <button\r\n// // // // //               onClick={() => { setStep(1); setError(''); setMessage(''); }}\r\n// // // // //               className=\"w-full py-2 text-indigo-600 hover:text-indigo-800 text-sm\"\r\n// // // // //             >\r\n// // // // //               ← Back to Signup\r\n// // // // //             </button>\r\n// // // // //           </div>\r\n// // // // //         </div>\r\n// // // // //       </div>\r\n// // // // //     );\r\n// // // // //   }\r\n\r\n// // // // //   // Step 1: Registration Form\r\n// // // // //   return (\r\n// // // // //     <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\r\n// // // // //       <div id=\"recaptcha-container\"></div>\r\n// // // // //       <div className=\"max-w-md w-full space-y-8\">\r\n// // // // //         <div className=\"text-center\">\r\n// // // // //           <h2 className=\"text-3xl font-extrabold text-gray-900\">Create your account</h2>\r\n// // // // //           <p className=\"mt-2 text-sm text-gray-600\">\r\n// // // // //             Or{' '}\r\n// // // // //             <Link to=\"/login\" className=\"font-medium text-indigo-600 hover:text-indigo-500\">\r\n// // // // //               sign in to your account\r\n// // // // //             </Link>\r\n// // // // //           </p>\r\n// // // // //         </div>\r\n\r\n// // // // //         <Formik\r\n// // // // //           initialValues={{ name: '', email: '', mobileNumber: '', password: '', confirmPassword: '' }}\r\n// // // // //           validationSchema={validationSchema}\r\n// // // // //           onSubmit={handleFormSubmit}\r\n// // // // //         >\r\n// // // // //           {({ isValid, dirty }) => (\r\n// // // // //             <Form className=\"mt-8 space-y-6\">\r\n// // // // //               <div className=\"space-y-4\">\r\n// // // // //                 {/* Name */}\r\n// // // // //                 <div>\r\n// // // // //                   <label className=\"block text-sm font-medium\">Full Name</label>\r\n// // // // //                   <Field name=\"name\" type=\"text\" placeholder=\"Your full name\"\r\n// // // // //                     className=\"mt-1 block w-full px-3 py-2 border rounded-md\" />\r\n// // // // //                   <ErrorMessage name=\"name\" component=\"div\" className=\"text-sm text-red-600\" />\r\n// // // // //                 </div>\r\n\r\n// // // // //                 {/* Email */}\r\n// // // // //                 <div>\r\n// // // // //                   <label className=\"block text-sm font-medium\">Email (optional)</label>\r\n// // // // //                   <Field name=\"email\" type=\"email\" placeholder=\"your.email@example.com\"\r\n// // // // //                     className=\"mt-1 block w-full px-3 py-2 border rounded-md\" />\r\n// // // // //                   <ErrorMessage name=\"email\" component=\"div\" className=\"text-sm text-red-600\" />\r\n// // // // //                 </div>\r\n\r\n// // // // //                 {/* Mobile */}\r\n// // // // //                 <div>\r\n// // // // //                   <label className=\"block text-sm font-medium\">Mobile Number</label>\r\n// // // // //                   <div className=\"flex mt-1\">\r\n// // // // //                     <span className=\"px-3 py-2 border bg-gray-50 text-gray-500\">+91</span>\r\n// // // // //                     <Field name=\"mobileNumber\" type=\"tel\" maxLength=\"10\" placeholder=\"9876543210\"\r\n// // // // //                       className=\"flex-1 px-3 py-2 border rounded-r-md\" />\r\n// // // // //                   </div>\r\n// // // // //                   <ErrorMessage name=\"mobileNumber\" component=\"div\" className=\"text-sm text-red-600\" />\r\n// // // // //                 </div>\r\n\r\n// // // // //                 {/* Password */}\r\n// // // // //                 <div>\r\n// // // // //                   <label className=\"block text-sm font-medium\">Password</label>\r\n// // // // //                   <Field name=\"password\" type=\"password\" placeholder=\"At least 6 characters\"\r\n// // // // //                     className=\"mt-1 block w-full px-3 py-2 border rounded-md\" />\r\n// // // // //                   <ErrorMessage name=\"password\" component=\"div\" className=\"text-sm text-red-600\" />\r\n// // // // //                 </div>\r\n\r\n// // // // //                 {/* Confirm Password */}\r\n// // // // //                 <div>\r\n// // // // //                   <label className=\"block text-sm font-medium\">Confirm Password</label>\r\n// // // // //                   <Field name=\"confirmPassword\" type=\"password\" placeholder=\"Confirm your password\"\r\n// // // // //                     className=\"mt-1 block w-full px-3 py-2 border rounded-md\" />\r\n// // // // //                   <ErrorMessage name=\"confirmPassword\" component=\"div\" className=\"text-sm text-red-600\" />\r\n// // // // //                 </div>\r\n// // // // //               </div>\r\n\r\n// // // // //               {error && <div className=\"bg-red-50 p-3 text-sm text-red-700 rounded-md\">{error}</div>}\r\n\r\n// // // // //               <button\r\n// // // // //                 type=\"submit\"\r\n// // // // //                 disabled={loading || !isValid || !dirty}\r\n// // // // //                 className=\"w-full py-2 px-4 rounded-md text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50\"\r\n// // // // //               >\r\n// // // // //                 {loading ? 'Sending OTP...' : 'Sign Up'}\r\n// // // // //               </button>\r\n// // // // //             </Form>\r\n// // // // //           )}\r\n// // // // //         </Formik>\r\n// // // // //       </div>\r\n// // // // //     </div>\r\n// // // // //   );\r\n// // // // // };\r\n\r\n// // // // // export default SignupForm;\r\n\r\n\r\n// // // // import React, { useState, useEffect } from \"react\";\r\n// // // // import { Formik, Form, Field, ErrorMessage } from \"formik\";\r\n// // // // import * as Yup from \"yup\";\r\n// // // // import { Link, useNavigate } from \"react-router-dom\";\r\n// // // // import { auth, RecaptchaVerifier, signInWithPhoneNumber } from \"../../firebase\";\r\n// // // // import { authAPI } from \"../../services/api\";\r\n\r\n// // // // const SignupForm = () => {\r\n// // // //   const [step, setStep] = useState(1); // 1: form, 2: otp, 3: success\r\n// // // //   const [loading, setLoading] = useState(false);\r\n// // // //   const [error, setError] = useState(\"\");\r\n// // // //   const [message, setMessage] = useState(\"\");\r\n// // // //   const [mobileForOtp, setMobileForOtp] = useState(\"\");\r\n// // // //   const [otp, setOtp] = useState(\"\");\r\n// // // //   const [formData, setFormData] = useState(null);\r\n// // // //   const navigate = useNavigate();\r\n\r\n// // // //   // ✅ Validation\r\n// // // //   const validationSchema = Yup.object({\r\n// // // //     name: Yup.string()\r\n// // // //       .min(2, \"Name must be at least 2 characters\")\r\n// // // //       .max(50, \"Name cannot exceed 50 characters\")\r\n// // // //       .required(\"Name is required\"),\r\n// // // //     email: Yup.string().email(\"Please enter a valid email address\").nullable(),\r\n// // // //     mobileNumber: Yup.string()\r\n// // // //       .matches(/^[0-9]{10}$/, \"Please enter a valid 10-digit mobile number\")\r\n// // // //       .required(\"Mobile number is required\"),\r\n// // // //     password: Yup.string()\r\n// // // //       .min(6, \"Password must be at least 6 characters\")\r\n// // // //       .matches(\r\n// // // //         /^(?=.*[a-zA-Z])(?=.*\\d).+$/,\r\n// // // //         \"Password must contain at least one letter and one number\"\r\n// // // //       )\r\n// // // //       .required(\"Password is required\"),\r\n// // // //     confirmPassword: Yup.string()\r\n// // // //       .oneOf([Yup.ref(\"password\"), null], \"Passwords must match\")\r\n// // // //       .required(\"Confirm password is required\"),\r\n// // // //   });\r\n\r\n// // // //   // ✅ Setup Recaptcha once\r\n// // // //   useEffect(() => {\r\n// // // //     if (!window.recaptchaVerifier) {\r\n// // // //       window.recaptchaVerifier = new RecaptchaVerifier(\r\n// // // //         \"recaptcha-container\",\r\n// // // //         { size: \"invisible\" },\r\n// // // //         auth\r\n// // // //       );\r\n// // // //     }\r\n// // // //   }, []);\r\n\r\n// // // //   // ✅ Send OTP\r\n// // // //   const sendOtp = async (mobile) => {\r\n// // // //     setLoading(true);\r\n// // // //     setError(\"\");\r\n// // // //     setMessage(\"\");\r\n\r\n// // // //     try {\r\n// // // //       const phoneNumber = `+91${mobile}`;\r\n// // // //       const confirmationResult = await signInWithPhoneNumber(\r\n// // // //         auth,\r\n// // // //         phoneNumber,\r\n// // // //         window.recaptchaVerifier\r\n// // // //       );\r\n\r\n// // // //       window.confirmationResult = confirmationResult;\r\n// // // //       setMessage(\"OTP sent to your mobile number.\");\r\n// // // //       setMobileForOtp(mobile);\r\n// // // //       setStep(2);\r\n// // // //     } catch (err) {\r\n// // // //       console.error(\"OTP Error:\", err);\r\n// // // //       if (err.code === \"auth/too-many-requests\") {\r\n// // // //         setError(\"Too many OTP requests. Please wait and try again later.\");\r\n// // // //       } else if (err.code === \"auth/missing-phone-number\") {\r\n// // // //         setError(\"Phone number सही format में दो (+91XXXXXXXXXX).\");\r\n// // // //       } else {\r\n// // // //         setError(err.message || \"Failed to send OTP. Please try again.\");\r\n// // // //       }\r\n// // // //     } finally {\r\n// // // //       setLoading(false);\r\n// // // //     }\r\n// // // //   };\r\n\r\n// // // //   // ✅ Verify OTP + Complete Signup\r\n// // // //   const verifyOtp = async () => {\r\n// // // //     setLoading(true);\r\n// // // //     setError(\"\");\r\n\r\n// // // //     try {\r\n// // // //       await window.confirmationResult.confirm(otp);\r\n\r\n// // // //       // ✅ Directly complete signup (multi-user per mobile allowed)\r\n// // // //       const response = await authAPI.completeSignup({\r\n// // // //         ...formData,\r\n// // // //         mobileNumber: mobileForOtp,\r\n// // // //       });\r\n\r\n// // // //       if (response.success) {\r\n// // // //         setMessage(\r\n// // // //           `Signup successful ✅ Your User ID: ${response.data.userId}`\r\n// // // //         );\r\n// // // //         console.log(\"All User IDs for this number:\", response.data.allUserIds);\r\n// // // //         setStep(3);\r\n// // // //       } else {\r\n// // // //         throw new Error(response.message || \"Signup failed\");\r\n// // // //       }\r\n// // // //     } catch (err) {\r\n// // // //       console.error(\"Signup OTP error:\", err);\r\n// // // //       setError(err.message || \"Invalid OTP. Please try again.\");\r\n// // // //     } finally {\r\n// // // //       setLoading(false);\r\n// // // //     }\r\n// // // //   };\r\n\r\n// // // //   // ✅ Handle Signup Submit\r\n// // // //   const handleFormSubmit = async (values) => {\r\n// // // //     setFormData(values);\r\n// // // //     await sendOtp(values.mobileNumber);\r\n// // // //   };\r\n\r\n// // // //   // ==================== SCREENS ====================\r\n\r\n// // // //   // Step 3: Success\r\n// // // //   if (step === 3) {\r\n// // // //     return (\r\n// // // //       <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\r\n// // // //         <div className=\"max-w-md w-full space-y-8\">\r\n// // // //           <div className=\"text-center\">\r\n// // // //             <h2 className=\"text-3xl font-extrabold text-gray-900\">\r\n// // // //               Registration Complete\r\n// // // //             </h2>\r\n// // // //             <p className=\"mt-2 text-sm text-gray-600\">\r\n// // // //               Please proceed to login with your credentials.\r\n// // // //             </p>\r\n// // // //           </div>\r\n// // // //           <div className=\"mt-6\">\r\n// // // //             <button\r\n// // // //               onClick={() => navigate(\"/login\")}\r\n// // // //               className=\"w-full py-2 px-4 rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700\"\r\n// // // //             >\r\n// // // //               Proceed to Login\r\n// // // //             </button>\r\n// // // //           </div>\r\n// // // //         </div>\r\n// // // //       </div>\r\n// // // //     );\r\n// // // //   }\r\n\r\n// // // //   // Step 2: OTP Verification\r\n// // // //   if (step === 2) {\r\n// // // //     return (\r\n// // // //       <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\r\n// // // //         <div id=\"recaptcha-container\"></div>\r\n// // // //         <div className=\"max-w-md w-full space-y-8\">\r\n// // // //           <div className=\"text-center\">\r\n// // // //             <h2 className=\"text-3xl font-extrabold text-gray-900\">Verify OTP</h2>\r\n// // // //             <p className=\"mt-2 text-sm text-gray-600\">\r\n// // // //               Enter the 6-digit OTP sent to +91 {mobileForOtp}\r\n// // // //             </p>\r\n// // // //           </div>\r\n\r\n// // // //           {message && (\r\n// // // //             <div className=\"p-3 bg-green-50 text-green-700 rounded-md text-sm\">\r\n// // // //               {message}\r\n// // // //             </div>\r\n// // // //           )}\r\n// // // //           {error && (\r\n// // // //             <div className=\"p-3 bg-red-50 text-red-700 rounded-md text-sm\">\r\n// // // //               {error}\r\n// // // //             </div>\r\n// // // //           )}\r\n\r\n// // // //           <div className=\"space-y-4\">\r\n// // // //             <input\r\n// // // //               type=\"text\"\r\n// // // //               value={otp}\r\n// // // //               onChange={(e) =>\r\n// // // //                 setOtp(e.target.value.replace(/\\D/g, \"\").slice(0, 6))\r\n// // // //               }\r\n// // // //               placeholder=\"Enter 6-digit OTP\"\r\n// // // //               className=\"w-full px-3 py-2 border rounded-md text-center text-lg tracking-widest\"\r\n// // // //               inputMode=\"numeric\"\r\n// // // //               autoFocus\r\n// // // //             />\r\n// // // //             <button\r\n// // // //               onClick={verifyOtp}\r\n// // // //               disabled={loading || otp.length !== 6}\r\n// // // //               className=\"w-full py-2 px-4 rounded-md text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50\"\r\n// // // //             >\r\n// // // //               {loading ? \"Verifying...\" : \"Verify OTP\"}\r\n// // // //             </button>\r\n// // // //             <button\r\n// // // //               onClick={() => sendOtp(mobileForOtp)}\r\n// // // //               disabled={loading}\r\n// // // //               className=\"w-full py-2 px-4 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 text-sm\"\r\n// // // //             >\r\n// // // //               Resend OTP\r\n// // // //             </button>\r\n// // // //             <button\r\n// // // //               onClick={() => {\r\n// // // //                 setStep(1);\r\n// // // //                 setError(\"\");\r\n// // // //                 setMessage(\"\");\r\n// // // //               }}\r\n// // // //               className=\"w-full py-2 text-indigo-600 hover:text-indigo-800 text-sm\"\r\n// // // //             >\r\n// // // //               ← Back to Signup\r\n// // // //             </button>\r\n// // // //           </div>\r\n// // // //         </div>\r\n// // // //       </div>\r\n// // // //     );\r\n// // // //   }\r\n\r\n// // // //   // Step 1: Registration Form\r\n// // // //   return (\r\n// // // //     <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\">\r\n// // // //       <div id=\"recaptcha-container\"></div>\r\n// // // //       <div className=\"max-w-md w-full space-y-8\">\r\n// // // //         <div className=\"text-center\">\r\n// // // //           <h2 className=\"text-3xl font-extrabold text-gray-900\">\r\n// // // //             Create your account\r\n// // // //           </h2>\r\n// // // //           <p className=\"mt-2 text-sm text-gray-600\">\r\n// // // //             Or{\" \"}\r\n// // // //             <Link\r\n// // // //               to=\"/login\"\r\n// // // //               className=\"font-medium text-indigo-600 hover:text-indigo-500\"\r\n// // // //             >\r\n// // // //               sign in to your account\r\n// // // //             </Link>\r\n// // // //           </p>\r\n// // // //         </div>\r\n\r\n// // // //         <Formik\r\n// // // //           initialValues={{\r\n// // // //             name: \"\",\r\n// // // //             email: \"\",\r\n// // // //             mobileNumber: \"\",\r\n// // // //             password: \"\",\r\n// // // //             confirmPassword: \"\",\r\n// // // //           }}\r\n// // // //           validationSchema={validationSchema}\r\n// // // //           onSubmit={handleFormSubmit}\r\n// // // //         >\r\n// // // //           {({ isValid, dirty }) => (\r\n// // // //             <Form className=\"mt-8 space-y-6\">\r\n// // // //               <div className=\"space-y-4\">\r\n// // // //                 {/* Name */}\r\n// // // //                 <div>\r\n// // // //                   <label className=\"block text-sm font-medium\">Full Name</label>\r\n// // // //                   <Field\r\n// // // //                     name=\"name\"\r\n// // // //                     type=\"text\"\r\n// // // //                     placeholder=\"Your full name\"\r\n// // // //                     className=\"mt-1 block w-full px-3 py-2 border rounded-md\"\r\n// // // //                   />\r\n// // // //                   <ErrorMessage\r\n// // // //                     name=\"name\"\r\n// // // //                     component=\"div\"\r\n// // // //                     className=\"text-sm text-red-600\"\r\n// // // //                   />\r\n// // // //                 </div>\r\n\r\n// // // //                 {/* Email */}\r\n// // // //                 <div>\r\n// // // //                   <label className=\"block text-sm font-medium\">\r\n// // // //                     Email (optional)\r\n// // // //                   </label>\r\n// // // //                   <Field\r\n// // // //                     name=\"email\"\r\n// // // //                     type=\"email\"\r\n// // // //                     placeholder=\"your.email@example.com\"\r\n// // // //                     className=\"mt-1 block w-full px-3 py-2 border rounded-md\"\r\n// // // //                   />\r\n// // // //                   <ErrorMessage\r\n// // // //                     name=\"email\"\r\n// // // //                     component=\"div\"\r\n// // // //                     className=\"text-sm text-red-600\"\r\n// // // //                   />\r\n// // // //                 </div>\r\n\r\n// // // //                 {/* Mobile */}\r\n// // // //                 <div>\r\n// // // //                   <label className=\"block text-sm font-medium\">\r\n// // // //                     Mobile Number\r\n// // // //                   </label>\r\n// // // //                   <div className=\"flex mt-1\">\r\n// // // //                     <span className=\"px-3 py-2 border bg-gray-50 text-gray-500\">\r\n// // // //                       +91\r\n// // // //                     </span>\r\n// // // //                     <Field\r\n// // // //                       name=\"mobileNumber\"\r\n// // // //                       type=\"tel\"\r\n// // // //                       maxLength=\"10\"\r\n// // // //                       placeholder=\"9876543210\"\r\n// // // //                       className=\"flex-1 px-3 py-2 border rounded-r-md\"\r\n// // // //                     />\r\n// // // //                   </div>\r\n// // // //                   <ErrorMessage\r\n// // // //                     name=\"mobileNumber\"\r\n// // // //                     component=\"div\"\r\n// // // //                     className=\"text-sm text-red-600\"\r\n// // // //                   />\r\n// // // //                 </div>\r\n\r\n// // // //                 {/* Password */}\r\n// // // //                 <div>\r\n// // // //                   <label className=\"block text-sm font-medium\">Password</label>\r\n// // // //                   <Field\r\n// // // //                     name=\"password\"\r\n// // // //                     type=\"password\"\r\n// // // //                     placeholder=\"At least 6 characters\"\r\n// // // //                     className=\"mt-1 block w-full px-3 py-2 border rounded-md\"\r\n// // // //                   />\r\n// // // //                   <ErrorMessage\r\n// // // //                     name=\"password\"\r\n// // // //                     component=\"div\"\r\n// // // //                     className=\"text-sm text-red-600\"\r\n// // // //                   />\r\n// // // //                 </div>\r\n\r\n// // // //                 {/* Confirm Password */}\r\n// // // //                 <div>\r\n// // // //                   <label className=\"block text-sm font-medium\">\r\n// // // //                     Confirm Password\r\n// // // //                   </label>\r\n// // // //                   <Field\r\n// // // //                     name=\"confirmPassword\"\r\n// // // //                     type=\"password\"\r\n// // // //                     placeholder=\"Confirm your password\"\r\n// // // //                     className=\"mt-1 block w-full px-3 py-2 border rounded-md\"\r\n// // // //                   />\r\n// // // //                   <ErrorMessage\r\n// // // //                     name=\"confirmPassword\"\r\n// // // //                     component=\"div\"\r\n// // // //                     className=\"text-sm text-red-600\"\r\n// // // //                   />\r\n// // // //                 </div>\r\n// // // //               </div>\r\n\r\n// // // //               {error && (\r\n// // // //                 <div className=\"bg-red-50 p-3 text-sm text-red-700 rounded-md\">\r\n// // // //                   {error}\r\n// // // //                 </div>\r\n// // // //               )}\r\n\r\n// // // //               <button\r\n// // // //                 type=\"submit\"\r\n// // // //                 disabled={loading || !isValid || !dirty}\r\n// // // //                 className=\"w-full py-2 px-4 rounded-md text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50\"\r\n// // // //               >\r\n// // // //                 {loading ? \"Sending OTP...\" : \"Sign Up\"}\r\n// // // //               </button>\r\n// // // //             </Form>\r\n// // // //           )}\r\n// // // //         </Formik>\r\n// // // //       </div>\r\n// // // //     </div>\r\n// // // //   );\r\n// // // // };\r\n\r\n// // // // export default SignupForm;\r\n\r\n\r\n\r\n// // // import React, { useState, useEffect } from \"react\";\r\n// // // import { Formik, Form, Field, ErrorMessage } from \"formik\";\r\n// // // import * as Yup from \"yup\";\r\n// // // import { Link, useNavigate } from \"react-router-dom\";\r\n// // // import { auth, RecaptchaVerifier, signInWithPhoneNumber } from \"../../firebase\";\r\n// // // import { authAPI } from \"../../services/api\";\r\n\r\n// // // const SignupForm = () => {\r\n// // //   const [step, setStep] = useState(1); \r\n// // //   const [loading, setLoading] = useState(false);\r\n// // //   const [error, setError] = useState(\"\");\r\n// // //   const [message, setMessage] = useState(\"\");\r\n// // //   const [mobileForOtp, setMobileForOtp] = useState(\"\");\r\n// // //   const [otp, setOtp] = useState(\"\");\r\n// // //   const [formData, setFormData] = useState(null);\r\n// // //   const navigate = useNavigate();\r\n\r\n// // //   // ✅ Validation\r\n// // //   const validationSchema = Yup.object({\r\n// // //     name: Yup.string().min(2).max(50).required(\"Name is required\"),\r\n// // //     email: Yup.string().email(\"Please enter a valid email address\").nullable(),\r\n// // //     mobileNumber: Yup.string()\r\n// // //       .matches(/^[0-9]{10}$/, \"Please enter a valid 10-digit mobile number\")\r\n// // //       .required(\"Mobile number is required\"),\r\n// // //     password: Yup.string()\r\n// // //       .min(6, \"Password must be at least 6 characters\")\r\n// // //       .matches(/^(?=.*[a-zA-Z])(?=.*\\d).+$/, \"Password must contain at least one letter and one number\")\r\n// // //       .required(\"Password is required\"),\r\n// // //     confirmPassword: Yup.string()\r\n// // //       .oneOf([Yup.ref(\"password\"), null], \"Passwords must match\")\r\n// // //       .required(\"Confirm password is required\"),\r\n// // //   });\r\n\r\n// // //   // ✅ Setup Recaptcha (Reset if already exists)\r\n// // //   const setupRecaptcha = () => {\r\n// // //     if (window.recaptchaVerifier) {\r\n// // //       window.recaptchaVerifier.clear();\r\n// // //     }\r\n// // //     window.recaptchaVerifier = new RecaptchaVerifier(\r\n// // //       auth,\r\n// // //       \"recaptcha-container\",\r\n// // //       { size: \"invisible\" }\r\n// // //     );\r\n// // //   };\r\n\r\n// // //   // ✅ Send OTP\r\n// // //   const sendOtp = async (mobile) => {\r\n// // //     setLoading(true);\r\n// // //     setError(\"\");\r\n// // //     setMessage(\"\");\r\n\r\n// // //     try {\r\n// // //       setupRecaptcha(); // always reset\r\n// // //       const phoneNumber = `+91${mobile}`;\r\n// // //       const appVerifier = window.recaptchaVerifier;\r\n\r\n// // //       const confirmationResult = await signInWithPhoneNumber(\r\n// // //         auth,\r\n// // //         phoneNumber,\r\n// // //         appVerifier\r\n// // //       );\r\n\r\n// // //       window.confirmationResult = confirmationResult;\r\n// // //       setMessage(\"OTP sent to your mobile number.\");\r\n// // //       setMobileForOtp(mobile);\r\n// // //       setStep(2);\r\n// // //     } catch (err) {\r\n// // //       console.error(\"OTP Error:\", err);\r\n// // //       if (err.code === \"auth/too-many-requests\") {\r\n// // //         setError(\"Too many OTP requests. Please wait and try again later.\");\r\n// // //       } else if (err.code === \"auth/missing-phone-number\") {\r\n// // //         setError(\"Phone number सही format में दो (+91XXXXXXXXXX).\");\r\n// // //       } else {\r\n// // //         setError(err.message || \"Failed to send OTP. Please try again.\");\r\n// // //       }\r\n// // //     } finally {\r\n// // //       setLoading(false);\r\n// // //     }\r\n// // //   };\r\n\r\n// // //   // ✅ Verify OTP + Complete Signup\r\n// // //   const verifyOtp = async () => {\r\n// // //     setLoading(true);\r\n// // //     setError(\"\");\r\n\r\n// // //     try {\r\n// // //       await window.confirmationResult.confirm(otp);\r\n\r\n// // //       const response = await authAPI.completeSignup({\r\n// // //         ...formData,\r\n// // //         mobileNumber: mobileForOtp,\r\n// // //       });\r\n\r\n// // //       if (response.success) {\r\n// // //         setMessage(`Signup successful ✅ Your User ID: ${response.data.userId}`);\r\n// // //         console.log(\"All User IDs for this number:\", response.data.allUserIds);\r\n// // //         setStep(3);\r\n// // //       } else {\r\n// // //         throw new Error(response.message || \"Signup failed\");\r\n// // //       }\r\n// // //     } catch (err) {\r\n// // //       console.error(\"Signup OTP error:\", err);\r\n// // //       setError(err.message || \"Invalid OTP. Please try again.\");\r\n// // //     } finally {\r\n// // //       setLoading(false);\r\n// // //     }\r\n// // //   };\r\n\r\n// // //   // ✅ Handle Signup Submit\r\n// // //   const handleFormSubmit = async (values) => {\r\n// // //     setFormData(values);\r\n// // //     await sendOtp(values.mobileNumber);\r\n// // //   };\r\n\r\n// // //   // Step 3: Success\r\n// // //   if (step === 3) {\r\n// // //     return (\r\n// // //       <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n// // //         <div className=\"max-w-md w-full space-y-8\">\r\n// // //           <div className=\"text-center\">\r\n// // //             <h2 className=\"text-3xl font-extrabold text-gray-900\">Registration Complete</h2>\r\n// // //             <p className=\"mt-2 text-sm text-gray-600\">Please proceed to login with your credentials.</p>\r\n// // //           </div>\r\n// // //           <button\r\n// // //             onClick={() => navigate(\"/login\")}\r\n// // //             className=\"w-full py-2 px-4 rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700\"\r\n// // //           >\r\n// // //             Proceed to Login\r\n// // //           </button>\r\n// // //         </div>\r\n// // //       </div>\r\n// // //     );\r\n// // //   }\r\n\r\n// // //   // Step 2: OTP Verification\r\n// // //   if (step === 2) {\r\n// // //     return (\r\n// // //       <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n// // //         <div id=\"recaptcha-container\"></div>\r\n// // //         <div className=\"max-w-md w-full space-y-8\">\r\n// // //           <div className=\"text-center\">\r\n// // //             <h2 className=\"text-3xl font-extrabold text-gray-900\">Verify OTP</h2>\r\n// // //             <p className=\"mt-2 text-sm text-gray-600\">Enter the 6-digit OTP sent to +91 {mobileForOtp}</p>\r\n// // //           </div>\r\n// // //           {message && <div className=\"p-3 bg-green-50 text-green-700 rounded-md\">{message}</div>}\r\n// // //           {error && <div className=\"p-3 bg-red-50 text-red-700 rounded-md\">{error}</div>}\r\n\r\n// // //           <input\r\n// // //             type=\"text\"\r\n// // //             value={otp}\r\n// // //             onChange={(e) => setOtp(e.target.value.replace(/\\D/g, \"\").slice(0, 6))}\r\n// // //             placeholder=\"Enter 6-digit OTP\"\r\n// // //             className=\"w-full px-3 py-2 border rounded-md text-center text-lg tracking-widest\"\r\n// // //           />\r\n// // //           <button\r\n// // //             onClick={verifyOtp}\r\n// // //             disabled={loading || otp.length !== 6}\r\n// // //             className=\"w-full py-2 px-4 rounded-md text-white bg-indigo-600 hover:bg-indigo-700\"\r\n// // //           >\r\n// // //             {loading ? \"Verifying...\" : \"Verify OTP\"}\r\n// // //           </button>\r\n// // //           <button\r\n// // //             onClick={() => sendOtp(mobileForOtp)}\r\n// // //             disabled={loading}\r\n// // //             className=\"w-full py-2 px-4 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200\"\r\n// // //           >\r\n// // //             Resend OTP\r\n// // //           </button>\r\n// // //           <button\r\n// // //             onClick={() => setStep(1)}\r\n// // //             className=\"w-full py-2 text-indigo-600 hover:text-indigo-800\"\r\n// // //           >\r\n// // //             ← Back to Signup\r\n// // //           </button>\r\n// // //         </div>\r\n// // //       </div>\r\n// // //     );\r\n// // //   }\r\n\r\n// // //   // Step 1: Signup Form\r\n// // //   return (\r\n// // //     <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n// // //       <div id=\"recaptcha-container\"></div>\r\n// // //       <div className=\"max-w-md w-full space-y-8\">\r\n// // //         <div className=\"text-center\">\r\n// // //           <h2 className=\"text-3xl font-extrabold text-gray-900\">Create your account</h2>\r\n// // //           <p className=\"mt-2 text-sm text-gray-600\">\r\n// // //             Or{\" \"}\r\n// // //             <Link to=\"/login\" className=\"font-medium text-indigo-600 hover:text-indigo-500\">\r\n// // //               sign in to your account\r\n// // //             </Link>\r\n// // //           </p>\r\n// // //         </div>\r\n\r\n// // //         <Formik\r\n// // //           initialValues={{ name: \"\", email: \"\", mobileNumber: \"\", password: \"\", confirmPassword: \"\" }}\r\n// // //           validationSchema={validationSchema}\r\n// // //           onSubmit={handleFormSubmit}\r\n// // //         >\r\n// // //           {({ isValid, dirty }) => (\r\n// // //             <Form className=\"space-y-6\">\r\n// // //               <div>\r\n// // //                 <label className=\"block text-sm font-medium\">Full Name</label>\r\n// // //                 <Field name=\"name\" type=\"text\" className=\"mt-1 block w-full border rounded-md\" />\r\n// // //                 <ErrorMessage name=\"name\" component=\"div\" className=\"text-sm text-red-600\" />\r\n// // //               </div>\r\n// // //               <div>\r\n// // //                 <label className=\"block text-sm font-medium\">Email (optional)</label>\r\n// // //                 <Field name=\"email\" type=\"email\" className=\"mt-1 block w-full border rounded-md\" />\r\n// // //                 <ErrorMessage name=\"email\" component=\"div\" className=\"text-sm text-red-600\" />\r\n// // //               </div>\r\n// // //               <div>\r\n// // //                 <label className=\"block text-sm font-medium\">Mobile Number</label>\r\n// // //                 <div className=\"flex mt-1\">\r\n// // //                   <span className=\"px-3 py-2 border bg-gray-50\">+91</span>\r\n// // //                   <Field name=\"mobileNumber\" type=\"tel\" maxLength=\"10\" className=\"flex-1 px-3 py-2 border rounded-r-md\" />\r\n// // //                 </div>\r\n// // //                 <ErrorMessage name=\"mobileNumber\" component=\"div\" className=\"text-sm text-red-600\" />\r\n// // //               </div>\r\n// // //               <div>\r\n// // //                 <label className=\"block text-sm font-medium\">Password</label>\r\n// // //                 <Field name=\"password\" type=\"password\" className=\"mt-1 block w-full border rounded-md\" />\r\n// // //                 <ErrorMessage name=\"password\" component=\"div\" className=\"text-sm text-red-600\" />\r\n// // //               </div>\r\n// // //               <div>\r\n// // //                 <label className=\"block text-sm font-medium\">Confirm Password</label>\r\n// // //                 <Field name=\"confirmPassword\" type=\"password\" className=\"mt-1 block w-full border rounded-md\" />\r\n// // //                 <ErrorMessage name=\"confirmPassword\" component=\"div\" className=\"text-sm text-red-600\" />\r\n// // //               </div>\r\n// // //               {error && <div className=\"bg-red-50 p-3 text-sm text-red-700 rounded-md\">{error}</div>}\r\n// // //               <button\r\n// // //                 type=\"submit\"\r\n// // //                 disabled={loading || !isValid || !dirty}\r\n// // //                 className=\"w-full py-2 px-4 rounded-md text-white bg-indigo-600 hover:bg-indigo-700 disabled:opacity-50\"\r\n// // //               >\r\n// // //                 {loading ? \"Sending OTP...\" : \"Sign Up\"}\r\n// // //               </button>\r\n// // //             </Form>\r\n// // //           )}\r\n// // //         </Formik>\r\n// // //       </div>\r\n// // //     </div>\r\n// // //   );\r\n// // // };\r\n\r\n// // // export default SignupForm;\r\n\r\n\r\n\r\n// // import React, { useState, useEffect } from \"react\";\r\n// // import { Formik, Form, Field, ErrorMessage } from \"formik\";\r\n// // import * as Yup from \"yup\";\r\n// // import { Link, useNavigate } from \"react-router-dom\";\r\n// // import { auth, RecaptchaVerifier, signInWithPhoneNumber } from \"../../firebase\";\r\n// // import { authAPI } from \"../../services/api\";\r\n\r\n// // const SignupForm = () => {\r\n// //   const [step, setStep] = useState(1); // 1 = form, 2 = OTP, 3 = success\r\n// //   const [loading, setLoading] = useState(false);\r\n// //   const [error, setError] = useState(\"\");\r\n// //   const [message, setMessage] = useState(\"\");\r\n// //   const [mobileForOtp, setMobileForOtp] = useState(\"\");\r\n// //   const [otp, setOtp] = useState(\"\");\r\n// //   const [formData, setFormData] = useState(null);\r\n// //   const navigate = useNavigate();\r\n\r\n// //   // ✅ Validation schema\r\n// //   const validationSchema = Yup.object({\r\n// //     name: Yup.string().min(2).max(50).required(\"Name is required\"),\r\n// //     email: Yup.string().email(\"Invalid email\").nullable(),\r\n// //     mobileNumber: Yup.string()\r\n// //       .matches(/^[0-9]{10}$/, \"Enter valid 10-digit mobile number\")\r\n// //       .required(\"Mobile number is required\"),\r\n// //     password: Yup.string()\r\n// //       .min(6)\r\n// //       .matches(/^(?=.*[a-zA-Z])(?=.*\\d).+$/, \"At least one letter & one number\")\r\n// //       .required(\"Password is required\"),\r\n// //     confirmPassword: Yup.string()\r\n// //       .oneOf([Yup.ref(\"password\"), null], \"Passwords must match\")\r\n// //       .required(\"Confirm password is required\"),\r\n// //   });\r\n\r\n// //   // ✅ Setup reCAPTCHA\r\n// //   const setupRecaptcha = () => {\r\n// //     if (!window.recaptchaVerifier) {\r\n// //       window.recaptchaVerifier = new RecaptchaVerifier(\r\n// //         \"recaptcha-container\",\r\n// //         {\r\n// //           size: \"invisible\", // can be 'normal' if you want visible recaptcha\r\n// //           callback: (response) => {\r\n// //             console.log(\"Recaptcha solved:\", response);\r\n// //           },\r\n// //         },\r\n// //         auth\r\n// //       );\r\n// //     }\r\n// //   };\r\n\r\n// //   // ✅ Send OTP\r\n// //   const sendOtp = async (mobile) => {\r\n// //     setLoading(true);\r\n// //     setError(\"\");\r\n// //     setMessage(\"\");\r\n\r\n// //     try {\r\n// //       setupRecaptcha();\r\n// //       const phoneNumber = `+91${mobile}`;\r\n// //       const appVerifier = window.recaptchaVerifier;\r\n\r\n// //       const confirmationResult = await signInWithPhoneNumber(\r\n// //         auth,\r\n// //         phoneNumber,\r\n// //         appVerifier\r\n// //       );\r\n\r\n// //       window.confirmationResult = confirmationResult;\r\n// //       setMessage(\"OTP sent successfully ✅\");\r\n// //       setMobileForOtp(mobile);\r\n// //       setStep(2);\r\n// //     } catch (err) {\r\n// //       console.error(\"OTP Error:\", err);\r\n// //       setError(err.message || \"Failed to send OTP.\");\r\n// //     } finally {\r\n// //       setLoading(false);\r\n// //     }\r\n// //   };\r\n\r\n// //   // ✅ Verify OTP + complete signup\r\n// //   const verifyOtp = async () => {\r\n// //     setLoading(true);\r\n// //     setError(\"\");\r\n\r\n// //     try {\r\n// //       await window.confirmationResult.confirm(otp);\r\n\r\n// //       const response = await authAPI.completeSignup({\r\n// //         ...formData,\r\n// //         mobileNumber: mobileForOtp,\r\n// //       })\r\n\r\n// //       if (response.success) {\r\n// //         setMessage(\r\n// //           `Signup successful ✅ Your User ID: ${response.data.userId}`\r\n// //         );\r\n// //         console.log(\"All User IDs for this number:\", response.data.allUserIds);\r\n// //         setStep(3);\r\n// //       } else {\r\n// //         throw new Error(response.message || \"Signup failed\");\r\n// //       }\r\n// //     } catch (err) {\r\n// //       console.error(\"Signup OTP error:\", err);\r\n// //       setError(err.message || \"Invalid OTP. Please try again.\");\r\n// //     } finally {\r\n// //       setLoading(false);\r\n// //     }\r\n// //   };\r\n\r\n// //   // ✅ Handle signup form submit\r\n// //   const handleFormSubmit = async (values) => {\r\n// //     setFormData(values);\r\n// //     await sendOtp(values.mobileNumber);\r\n// //   };\r\n\r\n// //   // ================= Screens =================\r\n\r\n// //   // Step 3: Success\r\n// //   if (step === 3) {\r\n// //     return (\r\n// //       <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-6\">\r\n// //         <div className=\"max-w-md w-full space-y-6 text-center\">\r\n// //           <h2 className=\"text-2xl font-bold text-green-600\">\r\n// //             Registration Complete 🎉\r\n// //           </h2>\r\n// //           <p className=\"text-gray-600\">Proceed to login with your credentials.</p>\r\n// //           <button\r\n// //             onClick={() => navigate(\"/login\")}\r\n// //             className=\"w-full py-2 px-4 rounded-md bg-indigo-600 text-white hover:bg-indigo-700\"\r\n// //           >\r\n// //             Go to Login\r\n// //           </button>\r\n// //         </div>\r\n// //       </div>\r\n// //     );\r\n// //   }\r\n\r\n// //   // Step 2: OTP Verification\r\n// //   if (step === 2) {\r\n// //     return (\r\n// //       <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-6\">\r\n// //         <div id=\"recaptcha-container\"></div>\r\n// //         <div className=\"max-w-md w-full space-y-6 text-center\">\r\n// //           <h2 className=\"text-xl font-bold\">Verify OTP</h2>\r\n// //           <p className=\"text-gray-600\">Enter the OTP sent to +91 {mobileForOtp}</p>\r\n\r\n// //           {message && <p className=\"text-green-600\">{message}</p>}\r\n// //           {error && <p className=\"text-red-600\">{error}</p>}\r\n\r\n// //           <input\r\n// //             type=\"text\"\r\n// //             value={otp}\r\n// //             onChange={(e) => setOtp(e.target.value.replace(/\\D/g, \"\").slice(0, 6))}\r\n// //             placeholder=\"Enter 6-digit OTP\"\r\n// //             className=\"w-full px-3 py-2 border rounded-md text-center\"\r\n// //           />\r\n\r\n// //           <button\r\n// //             onClick={verifyOtp}\r\n// //             disabled={loading || otp.length !== 6}\r\n// //             className=\"w-full py-2 mt-2 bg-indigo-600 text-white rounded-md\"\r\n// //           >\r\n// //             {loading ? \"Verifying...\" : \"Verify OTP\"}\r\n// //           </button>\r\n\r\n// //           <button\r\n// //             onClick={() => sendOtp(mobileForOtp)}\r\n// //             disabled={loading}\r\n// //             className=\"w-full py-2 mt-2 bg-gray-100 text-gray-700 rounded-md\"\r\n// //           >\r\n// //             Resend OTP\r\n// //           </button>\r\n// //         </div>\r\n// //       </div>\r\n// //     );\r\n// //   }\r\n\r\n// //   // Step 1: Registration Form\r\n// //   return (\r\n// //     <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-6\">\r\n// //       <div id=\"recaptcha-container\"></div>\r\n// //       <div className=\"max-w-md w-full space-y-6\">\r\n// //         <h2 className=\"text-2xl font-bold text-center\">Create your account</h2>\r\n\r\n// //         <Formik\r\n// //           initialValues={{\r\n// //             name: \"\",\r\n// //             email: \"\",\r\n// //             mobileNumber: \"\",\r\n// //             password: \"\",\r\n// //             confirmPassword: \"\",\r\n// //           }}\r\n// //           validationSchema={validationSchema}\r\n// //           onSubmit={handleFormSubmit}\r\n// //         >\r\n// //           {({ isValid, dirty }) => (\r\n// //             <Form className=\"space-y-4\">\r\n// //               {/* Name */}\r\n// //               <div>\r\n// //                 <label className=\"block text-sm font-medium\">Full Name</label>\r\n// //                 <Field\r\n// //                   name=\"name\"\r\n// //                   type=\"text\"\r\n// //                   className=\"mt-1 w-full px-3 py-2 border rounded-md\"\r\n// //                 />\r\n// //                 <ErrorMessage\r\n// //                   name=\"name\"\r\n// //                   component=\"div\"\r\n// //                   className=\"text-sm text-red-600\"\r\n// //                 />\r\n// //               </div>\r\n\r\n// //               {/* Email */}\r\n// //               <div>\r\n// //                 <label className=\"block text-sm font-medium\">Email (optional)</label>\r\n// //                 <Field\r\n// //                   name=\"email\"\r\n// //                   type=\"email\"\r\n// //                   className=\"mt-1 w-full px-3 py-2 border rounded-md\"\r\n// //                 />\r\n// //                 <ErrorMessage\r\n// //                   name=\"email\"\r\n// //                   component=\"div\"\r\n// //                   className=\"text-sm text-red-600\"\r\n// //                 />\r\n// //               </div>\r\n\r\n// //               {/* Mobile */}\r\n// //               <div>\r\n// //                 <label className=\"block text-sm font-medium\">Mobile Number</label>\r\n// //                 <div className=\"flex mt-1\">\r\n// //                   <span className=\"px-3 py-2 border bg-gray-50 text-gray-500\">\r\n// //                     +91\r\n// //                   </span>\r\n// //                   <Field\r\n// //                     name=\"mobileNumber\"\r\n// //                     type=\"tel\"\r\n// //                     maxLength=\"10\"\r\n// //                     placeholder=\"9876543210\"\r\n// //                     className=\"flex-1 px-3 py-2 border rounded-r-md\"\r\n// //                   />\r\n// //                 </div>\r\n// //                 <ErrorMessage\r\n// //                   name=\"mobileNumber\"\r\n// //                   component=\"div\"\r\n// //                   className=\"text-sm text-red-600\"\r\n// //                 />\r\n// //               </div>\r\n\r\n// //               {/* Password */}\r\n// //               <div>\r\n// //                 <label className=\"block text-sm font-medium\">Password</label>\r\n// //                 <Field\r\n// //                   name=\"password\"\r\n// //                   type=\"password\"\r\n// //                   className=\"mt-1 w-full px-3 py-2 border rounded-md\"\r\n// //                 />\r\n// //                 <ErrorMessage\r\n// //                   name=\"password\"\r\n// //                   component=\"div\"\r\n// //                   className=\"text-sm text-red-600\"\r\n// //                 />\r\n// //               </div>\r\n\r\n// //               {/* Confirm Password */}\r\n// //               <div>\r\n// //                 <label className=\"block text-sm font-medium\">Confirm Password</label>\r\n// //                 <Field\r\n// //                   name=\"confirmPassword\"\r\n// //                   type=\"password\"\r\n// //                   className=\"mt-1 w-full px-3 py-2 border rounded-md\"\r\n// //                 />\r\n// //                 <ErrorMessage\r\n// //                   name=\"confirmPassword\"\r\n// //                   component=\"div\"\r\n// //                   className=\"text-sm text-red-600\"\r\n// //                 />\r\n// //               </div>\r\n\r\n// //               {error && (\r\n// //                 <div className=\"bg-red-50 p-3 text-sm text-red-700 rounded-md\">\r\n// //                   {error}\r\n// //                 </div>\r\n// //               )}\r\n\r\n// //               <button\r\n// //                 type=\"submit\"\r\n// //                 disabled={loading || !isValid || !dirty}\r\n// //                 className=\"w-full py-2 px-4 rounded-md bg-indigo-600 text-white disabled:opacity-50\"\r\n// //               >\r\n// //                 {loading ? \"Sending OTP...\" : \"Sign Up\"}\r\n// //               </button>\r\n// //             </Form>\r\n// //           )}\r\n// //         </Formik>\r\n// //       </div>\r\n// //     </div>\r\n// //   );\r\n// // };\r\n\r\n// // export default SignupForm;/\r\n\r\n\r\n\r\n\r\n// import React, { useState, useEffect } from \"react\";\r\n// import { Formik, Form, Field, ErrorMessage } from \"formik\";\r\n// import * as Yup from \"yup\";\r\n// import { Link, useNavigate } from \"react-router-dom\";\r\n// import { auth, RecaptchaVerifier, signInWithPhoneNumber } from \"../../firebase\";\r\n// import { authAPI } from \"../../services/api\";\r\n\r\n// const SignupForm = () => {\r\n//   const [step, setStep] = useState(1); // 1 = form, 2 = OTP, 3 = success\r\n//   const [loading, setLoading] = useState(false);\r\n//   const [error, setError] = useState(\"\");\r\n//   const [message, setMessage] = useState(\"\");\r\n//   const [mobileForOtp, setMobileForOtp] = useState(\"\");\r\n//   const [otp, setOtp] = useState(\"\");\r\n//   const [formData, setFormData] = useState(null);\r\n//   const navigate = useNavigate();\r\n\r\n//   // ✅ Validation schema\r\n//   const validationSchema = Yup.object({\r\n//     name: Yup.string().min(2).max(50).required(\"Name is required\"),\r\n//     email: Yup.string().email(\"Invalid email\").nullable(),\r\n//     mobileNumber: Yup.string()\r\n//       .matches(/^[0-9]{10}$/, \"Enter valid 10-digit mobile number\")\r\n//       .required(\"Mobile number is required\"),\r\n//     password: Yup.string()\r\n//       .min(6)\r\n//       .matches(/^(?=.*[a-zA-Z])(?=.*\\d).+$/, \"At least one letter & one number\")\r\n//       .required(\"Password is required\"),\r\n//     confirmPassword: Yup.string()\r\n//       .oneOf([Yup.ref(\"password\"), null], \"Passwords must match\")\r\n//       .required(\"Confirm password is required\"),\r\n//   });\r\n\r\n//   // ✅ Setup reCAPTCHA (only once)\r\n//   const setupRecaptcha = () => {\r\n//     if (!window.recaptchaVerifier) {\r\n//       window.recaptchaVerifier = new RecaptchaVerifier(\r\n//         \"recaptcha-container\",\r\n//         {\r\n//           size: \"invisible\",\r\n//           callback: (response) => {\r\n//             console.log(\"Recaptcha solved ✅\");\r\n//           },\r\n//         },\r\n//         auth\r\n//       );\r\n//     } else {\r\n//       // reset recaptcha if already exists\r\n//       window.recaptchaVerifier.clear();\r\n//       window.recaptchaVerifier = new RecaptchaVerifier(\r\n//         \"recaptcha-container\",\r\n//         { size: \"invisible\" },\r\n//         auth\r\n//       );\r\n//     }\r\n//   };\r\n\r\n//   // ✅ Send OTP\r\n//   const sendOtp = async (mobile) => {\r\n//     setLoading(true);\r\n//     setError(\"\");\r\n//     setMessage(\"\");\r\n\r\n//     try {\r\n//       setupRecaptcha();\r\n//       const phoneNumber = `+91${mobile}`;\r\n//       const appVerifier = window.recaptchaVerifier;\r\n\r\n//       const confirmationResult = await signInWithPhoneNumber(\r\n//         auth,\r\n//         phoneNumber,\r\n//         appVerifier\r\n//       );\r\n\r\n//       window.confirmationResult = confirmationResult;\r\n//       setMessage(\"OTP sent successfully ✅\");\r\n//       setMobileForOtp(mobile);\r\n//       setStep(2);\r\n//     } catch (err) {\r\n//       console.error(\"OTP Error:\", err);\r\n//       setError(err.message || \"Failed to send OTP.\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   // ✅ Verify OTP + complete signup\r\n//   const verifyOtp = async () => {\r\n//     setLoading(true);\r\n//     setError(\"\");\r\n\r\n//     try {\r\n//       await window.confirmationResult.confirm(otp);\r\n\r\n//       const response = await authAPI.completeSignup({\r\n//         ...formData,\r\n//         mobileNumber: mobileForOtp,\r\n//       });\r\n\r\n//       if (response.success) {\r\n//         setMessage(\r\n//           `Signup successful ✅ Your User ID: ${response.data.userId}`\r\n//         );\r\n//         console.log(\"All User IDs for this number:\", response.data.allUserIds);\r\n//         setStep(3);\r\n//       } else {\r\n//         throw new Error(response.message || \"Signup failed\");\r\n//       }\r\n//     } catch (err) {\r\n//       console.error(\"Signup OTP error:\", err);\r\n//       setError(err.message || \"Invalid OTP. Please try again.\");\r\n//     } finally {\r\n//       setLoading(false);\r\n//     }\r\n//   };\r\n\r\n//   // ✅ Handle signup form submit\r\n//   const handleFormSubmit = async (values) => {\r\n//     setFormData(values);\r\n//     await sendOtp(values.mobileNumber);\r\n//   };\r\n\r\n//   // ================= Screens =================\r\n\r\n//   // Step 3: Success\r\n//   if (step === 3) {\r\n//     return (\r\n//       <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-6\">\r\n//         <div className=\"max-w-md w-full space-y-6 text-center\">\r\n//           <h2 className=\"text-2xl font-bold text-green-600\">\r\n//             Registration Complete 🎉\r\n//           </h2>\r\n//           <p className=\"text-gray-600\">Proceed to login with your credentials.</p>\r\n//           <button\r\n//             onClick={() => navigate(\"/login\")}\r\n//             className=\"w-full py-2 px-4 rounded-md bg-indigo-600 text-white hover:bg-indigo-700\"\r\n//           >\r\n//             Go to Login\r\n//           </button>\r\n//         </div>\r\n//       </div>\r\n//     );\r\n//   }\r\n\r\n//   // Step 2: OTP Verification\r\n//   if (step === 2) {\r\n//     return (\r\n//       <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-6\">\r\n//         {/* Recaptcha div only once in the whole app */}\r\n//         <div id=\"recaptcha-container\"></div>\r\n//         <div className=\"max-w-md w-full space-y-6 text-center\">\r\n//           <h2 className=\"text-xl font-bold\">Verify OTP</h2>\r\n//           <p className=\"text-gray-600\">Enter the OTP sent to +91 {mobileForOtp}</p>\r\n\r\n//           {message && <p className=\"text-green-600\">{message}</p>}\r\n//           {error && <p className=\"text-red-600\">{error}</p>}\r\n\r\n//           <input\r\n//             type=\"text\"\r\n//             value={otp}\r\n//             onChange={(e) => setOtp(e.target.value.replace(/\\D/g, \"\").slice(0, 6))}\r\n//             placeholder=\"Enter 6-digit OTP\"\r\n//             className=\"w-full px-3 py-2 border rounded-md text-center\"\r\n//           />\r\n\r\n//           <button\r\n//             onClick={verifyOtp}\r\n//             disabled={loading || otp.length !== 6}\r\n//             className=\"w-full py-2 mt-2 bg-indigo-600 text-white rounded-md\"\r\n//           >\r\n//             {loading ? \"Verifying...\" : \"Verify OTP\"}\r\n//           </button>\r\n\r\n//           <button\r\n//             onClick={() => sendOtp(mobileForOtp)}\r\n//             disabled={loading}\r\n//             className=\"w-full py-2 mt-2 bg-gray-100 text-gray-700 rounded-md\"\r\n//           >\r\n//             Resend OTP\r\n//           </button>\r\n//         </div>\r\n//       </div>\r\n//     );\r\n//   }\r\n\r\n//   // Step 1: Registration Form\r\n//   return (\r\n//     <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-6\">\r\n//       {/* Recaptcha div should exist only once */}\r\n//       <div id=\"recaptcha-container\"></div>\r\n//       <div className=\"max-w-md w-full space-y-6\">\r\n//         <h2 className=\"text-2xl font-bold text-center\">Create your account</h2>\r\n\r\n//         <Formik\r\n//           initialValues={{\r\n//             name: \"\",\r\n//             email: \"\",\r\n//             mobileNumber: \"\",\r\n//             password: \"\",\r\n//             confirmPassword: \"\",\r\n//           }}\r\n//           validationSchema={validationSchema}\r\n//           onSubmit={handleFormSubmit}\r\n//         >\r\n//           {({ isValid, dirty }) => (\r\n//             <Form className=\"space-y-4\">\r\n//               {/* Name */}\r\n//               <div>\r\n//                 <label className=\"block text-sm font-medium\">Full Name</label>\r\n//                 <Field\r\n//                   name=\"name\"\r\n//                   type=\"text\"\r\n//                   className=\"mt-1 w-full px-3 py-2 border rounded-md\"\r\n//                 />\r\n//                 <ErrorMessage\r\n//                   name=\"name\"\r\n//                   component=\"div\"\r\n//                   className=\"text-sm text-red-600\"\r\n//                 />\r\n//               </div>\r\n\r\n//               {/* Email */}\r\n//               <div>\r\n//                 <label className=\"block text-sm font-medium\">Email (optional)</label>\r\n//                 <Field\r\n//                   name=\"email\"\r\n//                   type=\"email\"\r\n//                   className=\"mt-1 w-full px-3 py-2 border rounded-md\"\r\n//                 />\r\n//                 <ErrorMessage\r\n//                   name=\"email\"\r\n//                   component=\"div\"\r\n//                   className=\"text-sm text-red-600\"\r\n//                 />\r\n//               </div>\r\n\r\n//               {/* Mobile */}\r\n//               <div>\r\n//                 <label className=\"block text-sm font-medium\">Mobile Number</label>\r\n//                 <div className=\"flex mt-1\">\r\n//                   <span className=\"px-3 py-2 border bg-gray-50 text-gray-500\">\r\n//                     +91\r\n//                   </span>\r\n//                   <Field\r\n//                     name=\"mobileNumber\"\r\n//                     type=\"tel\"\r\n//                     maxLength=\"10\"\r\n//                     placeholder=\"9876543210\"\r\n//                     className=\"flex-1 px-3 py-2 border rounded-r-md\"\r\n//                   />\r\n//                 </div>\r\n//                 <ErrorMessage\r\n//                   name=\"mobileNumber\"\r\n//                   component=\"div\"\r\n//                   className=\"text-sm text-red-600\"\r\n//                 />\r\n//               </div>\r\n\r\n//               {/* Password */}\r\n//               <div>\r\n//                 <label className=\"block text-sm font-medium\">Password</label>\r\n//                 <Field\r\n//                   name=\"password\"\r\n//                   type=\"password\"\r\n//                   className=\"mt-1 w-full px-3 py-2 border rounded-md\"\r\n//                 />\r\n//                 <ErrorMessage\r\n//                   name=\"password\"\r\n//                   component=\"div\"\r\n//                   className=\"text-sm text-red-600\"\r\n//                 />\r\n//               </div>\r\n\r\n//               {/* Confirm Password */}\r\n//               <div>\r\n//                 <label className=\"block text-sm font-medium\">Confirm Password</label>\r\n//                 <Field\r\n//                   name=\"confirmPassword\"\r\n//                   type=\"password\"\r\n//                   className=\"mt-1 w-full px-3 py-2 border rounded-md\"\r\n//                 />\r\n//                 <ErrorMessage\r\n//                   name=\"confirmPassword\"\r\n//                   component=\"div\"\r\n//                   className=\"text-sm text-red-600\"\r\n//                 />\r\n//               </div>\r\n\r\n//               {error && (\r\n//                 <div className=\"bg-red-50 p-3 text-sm text-red-700 rounded-md\">\r\n//                   {error}\r\n//                 </div>\r\n//               )}\r\n\r\n//               <button\r\n//                 type=\"submit\"\r\n//                 disabled={loading || !isValid || !dirty}\r\n//                 className=\"w-full py-2 px-4 rounded-md bg-indigo-600 text-white disabled:opacity-50\"\r\n//               >\r\n//                 {loading ? \"Sending OTP...\" : \"Sign Up\"}\r\n//               </button>\r\n//             </Form>\r\n//           )}\r\n//         </Formik>\r\n//       </div>\r\n//     </div>\r\n//   );\r\n// };\r\n\r\n// export default SignupForm;\r\n\r\n\r\n\r\n\r\nimport React, { useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport authAPI from \"../api/authApi\";\r\n\r\nexport default function SignupForm() {\r\n  const navigate = useNavigate();\r\n\r\n  const [step, setStep] = useState(1);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState(\"\");\r\n  const [message, setMessage] = useState(\"\");\r\n\r\n  const [otp, setOtp] = useState(\"\");\r\n  const [mobileForOtp, setMobileForOtp] = useState(\"\");\r\n\r\n  const [formData, setFormData] = useState({\r\n    name: \"\",\r\n    email: \"\",\r\n    password: \"\",\r\n    mobileNumber: \"\",\r\n    userId: \"\",\r\n  });\r\n\r\n  // ✅ Handle form input change\r\n  const handleChange = (e) => {\r\n    setFormData({ ...formData, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  // ✅ Send OTP\r\n  const sendOtp = async () => {\r\n    setLoading(true);\r\n    setError(\"\");\r\n\r\n    try {\r\n      const response = await authAPI.sendOtp(formData.mobileNumber);\r\n      if (response.success) {\r\n        setMessage(\"OTP sent successfully ✅\");\r\n        setMobileForOtp(formData.mobileNumber);\r\n        setStep(2);\r\n      } else {\r\n        throw new Error(response.message || \"Failed to send OTP\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Send OTP error:\", err);\r\n      setError(err.message || \"Something went wrong.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // ✅ Verify OTP + complete signup\r\n  const verifyOtp = async () => {\r\n    setLoading(true);\r\n    setError(\"\");\r\n\r\n    try {\r\n      await window.confirmationResult.confirm(otp);\r\n\r\n      const response = await authAPI.completeSignup({\r\n        ...formData,\r\n        mobileNumber: mobileForOtp,\r\n      });\r\n\r\n      if (response.success) {\r\n        setMessage(\"Signup successful ✅\");\r\n        setFormData({\r\n          ...formData,\r\n          userId: response.data.userId,\r\n          mobileNumber: response.data.mobileNumber,\r\n        }); // ✅ save userId + mobile\r\n        setStep(3);\r\n      } else {\r\n        throw new Error(response.message || \"Signup failed\");\r\n      }\r\n    } catch (err) {\r\n      console.error(\"Signup OTP error:\", err);\r\n      setError(err.message || \"Invalid OTP. Please try again.\");\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  // Step 1: Signup Form\r\n  if (step === 1) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-6\">\r\n        <div className=\"max-w-md w-full space-y-6\">\r\n          <h2 className=\"text-center text-3xl font-extrabold text-gray-900\">\r\n            Create your account\r\n          </h2>\r\n\r\n          {error && <p className=\"text-red-500 text-sm\">{error}</p>}\r\n          {message && <p className=\"text-green-500 text-sm\">{message}</p>}\r\n\r\n          <input\r\n            type=\"text\"\r\n            name=\"name\"\r\n            placeholder=\"Full Name\"\r\n            value={formData.name}\r\n            onChange={handleChange}\r\n            className=\"w-full px-3 py-2 border rounded\"\r\n          />\r\n          <input\r\n            type=\"email\"\r\n            name=\"email\"\r\n            placeholder=\"Email Address\"\r\n            value={formData.email}\r\n            onChange={handleChange}\r\n            className=\"w-full px-3 py-2 border rounded\"\r\n          />\r\n          <input\r\n            type=\"password\"\r\n            name=\"password\"\r\n            placeholder=\"Password\"\r\n            value={formData.password}\r\n            onChange={handleChange}\r\n            className=\"w-full px-3 py-2 border rounded\"\r\n          />\r\n          <input\r\n            type=\"text\"\r\n            name=\"mobileNumber\"\r\n            placeholder=\"Mobile Number\"\r\n            value={formData.mobileNumber}\r\n            onChange={handleChange}\r\n            className=\"w-full px-3 py-2 border rounded\"\r\n          />\r\n\r\n          <button\r\n            onClick={sendOtp}\r\n            disabled={loading}\r\n            className=\"w-full py-2 px-4 rounded-md bg-indigo-600 text-white hover:bg-indigo-700\"\r\n          >\r\n            {loading ? \"Sending OTP...\" : \"Send OTP\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Step 2: OTP Verification\r\n  if (step === 2) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-6\">\r\n        <div className=\"max-w-md w-full space-y-6 text-center\">\r\n          <h2 className=\"text-2xl font-bold\">Verify OTP</h2>\r\n          <p className=\"text-gray-600\">\r\n            OTP sent to <b>{mobileForOtp}</b>\r\n          </p>\r\n\r\n          {error && <p className=\"text-red-500 text-sm\">{error}</p>}\r\n          {message && <p className=\"text-green-500 text-sm\">{message}</p>}\r\n\r\n          <input\r\n            type=\"text\"\r\n            placeholder=\"Enter OTP\"\r\n            value={otp}\r\n            onChange={(e) => setOtp(e.target.value)}\r\n            className=\"w-full px-3 py-2 border rounded\"\r\n          />\r\n\r\n          <button\r\n            onClick={verifyOtp}\r\n            disabled={loading}\r\n            className=\"w-full py-2 px-4 rounded-md bg-green-600 text-white hover:bg-green-700\"\r\n          >\r\n            {loading ? \"Verifying...\" : \"Verify & Complete Signup\"}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Step 3: Success\r\n  if (step === 3) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-6\">\r\n        <div className=\"max-w-md w-full space-y-6 text-center\">\r\n          <h2 className=\"text-2xl font-bold text-green-600\">\r\n            Registration Complete 🎉\r\n          </h2>\r\n\r\n          <p className=\"text-gray-700\">\r\n            Your User ID: <b>{formData?.userId}</b>\r\n          </p>\r\n          <p className=\"text-gray-700\">\r\n            Registered Mobile: <b>{formData?.mobileNumber}</b>\r\n          </p>\r\n\r\n          <p className=\"text-gray-600 mt-4\">\r\n            Proceed to login with your credentials.\r\n          </p>\r\n\r\n          <button\r\n            onClick={() => navigate(\"/login\")}\r\n            className=\"w-full py-2 px-4 rounded-md bg-indigo-600 text-white hover:bg-indigo-700\"\r\n          >\r\n            Go to Login\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAIA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAIA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAKA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAKA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,WAAW,QAAQ,kBAAkB;AAC9C,OAAOC,OAAO,MAAM,gBAAgB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAErC,eAAe,SAASC,UAAUA,CAAA,EAAG;EAAAC,EAAA;EACnC,MAAMC,QAAQ,GAAGN,WAAW,CAAC,CAAC;EAE9B,MAAM,CAACO,IAAI,EAAEC,OAAO,CAAC,GAAGT,QAAQ,CAAC,CAAC,CAAC;EACnC,MAAM,CAACU,OAAO,EAAEC,UAAU,CAAC,GAAGX,QAAQ,CAAC,KAAK,CAAC;EAC7C,MAAM,CAACY,KAAK,EAAEC,QAAQ,CAAC,GAAGb,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACc,OAAO,EAAEC,UAAU,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EAE1C,MAAM,CAACgB,GAAG,EAAEC,MAAM,CAAC,GAAGjB,QAAQ,CAAC,EAAE,CAAC;EAClC,MAAM,CAACkB,YAAY,EAAEC,eAAe,CAAC,GAAGnB,QAAQ,CAAC,EAAE,CAAC;EAEpD,MAAM,CAACoB,QAAQ,EAAEC,WAAW,CAAC,GAAGrB,QAAQ,CAAC;IACvCsB,IAAI,EAAE,EAAE;IACRC,KAAK,EAAE,EAAE;IACTC,QAAQ,EAAE,EAAE;IACZC,YAAY,EAAE,EAAE;IAChBC,MAAM,EAAE;EACV,CAAC,CAAC;;EAEF;EACA,MAAMC,YAAY,GAAIC,CAAC,IAAK;IAC1BP,WAAW,CAAC;MAAE,GAAGD,QAAQ;MAAE,CAACQ,CAAC,CAACC,MAAM,CAACP,IAAI,GAAGM,CAAC,CAACC,MAAM,CAACC;IAAM,CAAC,CAAC;EAC/D,CAAC;;EAED;EACA,MAAMC,OAAO,GAAG,MAAAA,CAAA,KAAY;IAC1BpB,UAAU,CAAC,IAAI,CAAC;IAChBE,QAAQ,CAAC,EAAE,CAAC;IAEZ,IAAI;MACF,MAAMmB,QAAQ,GAAG,MAAM9B,OAAO,CAAC6B,OAAO,CAACX,QAAQ,CAACK,YAAY,CAAC;MAC7D,IAAIO,QAAQ,CAACC,OAAO,EAAE;QACpBlB,UAAU,CAAC,yBAAyB,CAAC;QACrCI,eAAe,CAACC,QAAQ,CAACK,YAAY,CAAC;QACtChB,OAAO,CAAC,CAAC,CAAC;MACZ,CAAC,MAAM;QACL,MAAM,IAAIyB,KAAK,CAACF,QAAQ,CAAClB,OAAO,IAAI,oBAAoB,CAAC;MAC3D;IACF,CAAC,CAAC,OAAOqB,GAAG,EAAE;MACZC,OAAO,CAACxB,KAAK,CAAC,iBAAiB,EAAEuB,GAAG,CAAC;MACrCtB,QAAQ,CAACsB,GAAG,CAACrB,OAAO,IAAI,uBAAuB,CAAC;IAClD,CAAC,SAAS;MACRH,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;;EAED;EACA,MAAM0B,SAAS,GAAG,MAAAA,CAAA,KAAY;IAC5B1B,UAAU,CAAC,IAAI,CAAC;IAChBE,QAAQ,CAAC,EAAE,CAAC;IAEZ,IAAI;MACF,MAAMyB,MAAM,CAACC,kBAAkB,CAACC,OAAO,CAACxB,GAAG,CAAC;MAE5C,MAAMgB,QAAQ,GAAG,MAAM9B,OAAO,CAACuC,cAAc,CAAC;QAC5C,GAAGrB,QAAQ;QACXK,YAAY,EAAEP;MAChB,CAAC,CAAC;MAEF,IAAIc,QAAQ,CAACC,OAAO,EAAE;QACpBlB,UAAU,CAAC,qBAAqB,CAAC;QACjCM,WAAW,CAAC;UACV,GAAGD,QAAQ;UACXM,MAAM,EAAEM,QAAQ,CAACU,IAAI,CAAChB,MAAM;UAC5BD,YAAY,EAAEO,QAAQ,CAACU,IAAI,CAACjB;QAC9B,CAAC,CAAC,CAAC,CAAC;QACJhB,OAAO,CAAC,CAAC,CAAC;MACZ,CAAC,MAAM;QACL,MAAM,IAAIyB,KAAK,CAACF,QAAQ,CAAClB,OAAO,IAAI,eAAe,CAAC;MACtD;IACF,CAAC,CAAC,OAAOqB,GAAG,EAAE;MACZC,OAAO,CAACxB,KAAK,CAAC,mBAAmB,EAAEuB,GAAG,CAAC;MACvCtB,QAAQ,CAACsB,GAAG,CAACrB,OAAO,IAAI,gCAAgC,CAAC;IAC3D,CAAC,SAAS;MACRH,UAAU,CAAC,KAAK,CAAC;IACnB;EACF,CAAC;;EAED;EACA,IAAIH,IAAI,KAAK,CAAC,EAAE;IACd,oBACEJ,OAAA;MAAKuC,SAAS,EAAC,qEAAqE;MAAAC,QAAA,eAClFxC,OAAA;QAAKuC,SAAS,EAAC,2BAA2B;QAAAC,QAAA,gBACxCxC,OAAA;UAAIuC,SAAS,EAAC,mDAAmD;UAAAC,QAAA,EAAC;QAElE;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,EAEJpC,KAAK,iBAAIR,OAAA;UAAGuC,SAAS,EAAC,sBAAsB;UAAAC,QAAA,EAAEhC;QAAK;UAAAiC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,EACxDlC,OAAO,iBAAIV,OAAA;UAAGuC,SAAS,EAAC,wBAAwB;UAAAC,QAAA,EAAE9B;QAAO;UAAA+B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAE/D5C,OAAA;UACE6C,IAAI,EAAC,MAAM;UACX3B,IAAI,EAAC,MAAM;UACX4B,WAAW,EAAC,WAAW;UACvBpB,KAAK,EAAEV,QAAQ,CAACE,IAAK;UACrB6B,QAAQ,EAAExB,YAAa;UACvBgB,SAAS,EAAC;QAAiC;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC5C,CAAC,eACF5C,OAAA;UACE6C,IAAI,EAAC,OAAO;UACZ3B,IAAI,EAAC,OAAO;UACZ4B,WAAW,EAAC,eAAe;UAC3BpB,KAAK,EAAEV,QAAQ,CAACG,KAAM;UACtB4B,QAAQ,EAAExB,YAAa;UACvBgB,SAAS,EAAC;QAAiC;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC5C,CAAC,eACF5C,OAAA;UACE6C,IAAI,EAAC,UAAU;UACf3B,IAAI,EAAC,UAAU;UACf4B,WAAW,EAAC,UAAU;UACtBpB,KAAK,EAAEV,QAAQ,CAACI,QAAS;UACzB2B,QAAQ,EAAExB,YAAa;UACvBgB,SAAS,EAAC;QAAiC;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC5C,CAAC,eACF5C,OAAA;UACE6C,IAAI,EAAC,MAAM;UACX3B,IAAI,EAAC,cAAc;UACnB4B,WAAW,EAAC,eAAe;UAC3BpB,KAAK,EAAEV,QAAQ,CAACK,YAAa;UAC7B0B,QAAQ,EAAExB,YAAa;UACvBgB,SAAS,EAAC;QAAiC;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC5C,CAAC,eAEF5C,OAAA;UACEgD,OAAO,EAAErB,OAAQ;UACjBsB,QAAQ,EAAE3C,OAAQ;UAClBiC,SAAS,EAAC,0EAA0E;UAAAC,QAAA,EAEnFlC,OAAO,GAAG,gBAAgB,GAAG;QAAU;UAAAmC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAClC,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV;;EAEA;EACA,IAAIxC,IAAI,KAAK,CAAC,EAAE;IACd,oBACEJ,OAAA;MAAKuC,SAAS,EAAC,qEAAqE;MAAAC,QAAA,eAClFxC,OAAA;QAAKuC,SAAS,EAAC,uCAAuC;QAAAC,QAAA,gBACpDxC,OAAA;UAAIuC,SAAS,EAAC,oBAAoB;UAAAC,QAAA,EAAC;QAAU;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAClD5C,OAAA;UAAGuC,SAAS,EAAC,eAAe;UAAAC,QAAA,GAAC,cACf,eAAAxC,OAAA;YAAAwC,QAAA,EAAI1B;UAAY;YAAA2B,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAChC,CAAC,EAEHpC,KAAK,iBAAIR,OAAA;UAAGuC,SAAS,EAAC,sBAAsB;UAAAC,QAAA,EAAEhC;QAAK;UAAAiC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,EACxDlC,OAAO,iBAAIV,OAAA;UAAGuC,SAAS,EAAC,wBAAwB;UAAAC,QAAA,EAAE9B;QAAO;UAAA+B,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAE/D5C,OAAA;UACE6C,IAAI,EAAC,MAAM;UACXC,WAAW,EAAC,WAAW;UACvBpB,KAAK,EAAEd,GAAI;UACXmC,QAAQ,EAAGvB,CAAC,IAAKX,MAAM,CAACW,CAAC,CAACC,MAAM,CAACC,KAAK,CAAE;UACxCa,SAAS,EAAC;QAAiC;UAAAE,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC5C,CAAC,eAEF5C,OAAA;UACEgD,OAAO,EAAEf,SAAU;UACnBgB,QAAQ,EAAE3C,OAAQ;UAClBiC,SAAS,EAAC,wEAAwE;UAAAC,QAAA,EAEjFlC,OAAO,GAAG,cAAc,GAAG;QAA0B;UAAAmC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAChD,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV;;EAEA;EACA,IAAIxC,IAAI,KAAK,CAAC,EAAE;IACd,oBACEJ,OAAA;MAAKuC,SAAS,EAAC,qEAAqE;MAAAC,QAAA,eAClFxC,OAAA;QAAKuC,SAAS,EAAC,uCAAuC;QAAAC,QAAA,gBACpDxC,OAAA;UAAIuC,SAAS,EAAC,mCAAmC;UAAAC,QAAA,EAAC;QAElD;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAI,CAAC,eAEL5C,OAAA;UAAGuC,SAAS,EAAC,eAAe;UAAAC,QAAA,GAAC,gBACb,eAAAxC,OAAA;YAAAwC,QAAA,EAAIxB,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEM;UAAM;YAAAmB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACtC,CAAC,eACJ5C,OAAA;UAAGuC,SAAS,EAAC,eAAe;UAAAC,QAAA,GAAC,qBACR,eAAAxC,OAAA;YAAAwC,QAAA,EAAIxB,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEK;UAAY;YAAAoB,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAI,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACjD,CAAC,eAEJ5C,OAAA;UAAGuC,SAAS,EAAC,oBAAoB;UAAAC,QAAA,EAAC;QAElC;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC,eAEJ5C,OAAA;UACEgD,OAAO,EAAEA,CAAA,KAAM7C,QAAQ,CAAC,QAAQ,CAAE;UAClCoC,SAAS,EAAC,0EAA0E;UAAAC,QAAA,EACrF;QAED;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACN;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAEV;AACF;AAAC1C,EAAA,CAtMuBD,UAAU;EAAA,QACfJ,WAAW;AAAA;AAAAqD,EAAA,GADNjD,UAAU;AAAA,IAAAiD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}